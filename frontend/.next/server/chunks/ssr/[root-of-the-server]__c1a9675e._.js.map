{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/blog/BlogList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/blog/BlogList.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/blog/BlogList.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/blog/BlogList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/blog/BlogList.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/blog/BlogList.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyQ,GACtS,uCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/blog/page.tsx"],"sourcesContent":["// frontend/src/app/blog/page.tsx\r\nimport type { Metadata } from \"next\";\r\nimport Link from \"next/link\";\r\nimport BlogList from \"./BlogList\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Blog — Fahari Yoghurt\",\r\n  description:\r\n    \"Read the latest news, recipes, and stories about Fahari Yoghurt and healthy living.\",\r\n  openGraph: {\r\n    title: \"Fahari Yoghurt Blog\",\r\n    description:\r\n      \"Stay up-to-date with Fahari Yoghurt's news, tips, and stories from the farm to your table.\",\r\n    url: \"https://faharidairies.co.ke/blog\",\r\n  },\r\n};\r\n\r\nexport const revalidate = 60; // seconds - ISR\r\n\r\ntype BlogItem = {\r\n  _id?: string;\r\n  id?: string;\r\n  title: string;\r\n  slug: string;\r\n  excerpt?: string;\r\n  image?: string;\r\n  category?: string;\r\n  tags?: string[];\r\n  author?: string;\r\n  views?: number;\r\n};\r\n\r\ntype ApiResponse = {\r\n  success: boolean;\r\n  count?: number;\r\n  total?: number;\r\n  currentPage?: number;\r\n  totalPages?: number;\r\n  data?: BlogItem[];\r\n  message?: string;\r\n};\r\n\r\nconst DEFAULT_LIMIT = 9;\r\n\r\n/** Build API URL (uses NEXT_PUBLIC_API_URL when provided or falls back to relative path) */\r\nfunction buildApiUrl(page = 1, limit = DEFAULT_LIMIT) {\r\n  const base = process.env.NEXT_PUBLIC_API_URL ?? \"\";\r\n  const prefix = base.replace(/\\/$/, \"\");\r\n  // If prefix is empty string, return relative path\r\n  return `${prefix || \"\"}/api/blogs?page=${page}&limit=${limit}`;\r\n}\r\n\r\n/**\r\n * Server component page — MUST await searchParams before using it.\r\n *\r\n * Note: searchParams is awaited due to Next.js App Router semantics.\r\n */\r\nexport default async function BlogPage({\r\n  searchParams,\r\n}: {\r\n  searchParams?: Record<string, string | string[] | undefined> | Promise<Record<string, string | string[] | undefined> | undefined>;\r\n}) {\r\n  // Await the searchParams proxy (required by Next.js)\r\n  const params = (await searchParams) ?? {};\r\n  // normalize page param (handle string | string[] | undefined)\r\n  const rawPage = Array.isArray(params.page) ? params.page[0] : (params.page as string | undefined);\r\n  const page = Math.max(1, Number(rawPage ?? \"1\") || 1);\r\n  const limit = DEFAULT_LIMIT;\r\n\r\n  const url = buildApiUrl(page, limit);\r\n\r\n  let api: ApiResponse | null = null;\r\n  let fetchError: string | null = null;\r\n\r\n  try {\r\n    const res = await fetch(url, { next: { revalidate } });\r\n\r\n    if (!res.ok) {\r\n      fetchError = `Failed to load blogs: ${res.status} ${res.statusText}`;\r\n    } else {\r\n      api = (await res.json()) as ApiResponse;\r\n      if (!api || !Array.isArray(api.data)) {\r\n        fetchError = \"Unexpected API response\";\r\n      }\r\n    }\r\n  } catch (err) {\r\n    fetchError = err instanceof Error ? err.message : String(err);\r\n  }\r\n\r\n  const blogs = api?.data ?? [];\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-gray-50 px-6 py-12\">\r\n      <header className=\"max-w-3xl mx-auto text-center mb-12\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-gray-900 mb-4\">\r\n          Fahari Yoghurt Blog\r\n        </h1>\r\n        <p className=\"text-gray-600 text-lg\">\r\n          Stay up-to-date with our latest news, healthy tips, and delicious recipes.\r\n        </p>\r\n      </header>\r\n\r\n      <section className=\"max-w-7xl mx-auto\">\r\n        {fetchError ? (\r\n          <div className=\"rounded-md bg-red-50 border border-red-200 p-4 text-red-800\">\r\n            <strong className=\"block font-medium\">Error loading blogs</strong>\r\n            <p className=\"mt-1 text-sm\">{fetchError}</p>\r\n            <p className=\"mt-2 text-xs text-gray-600\">\r\n              If this continues, check your backend or environment variable <code>NEXT_PUBLIC_API_URL</code>.\r\n            </p>\r\n          </div>\r\n        ) : blogs.length === 0 ? (\r\n          <div className=\"text-center py-12 text-gray-600\">No blog posts found.</div>\r\n        ) : (\r\n          <>\r\n            {/* BlogList is a client component; it will handle rendering cards and images */}\r\n            <BlogList blogs={blogs} />\r\n\r\n            {/* Pagination (server-rendered links) */}\r\n            <div className=\"mt-8 flex items-center justify-center\">\r\n              <Pagination\r\n                currentPage={api?.currentPage ?? page}\r\n                totalPages={api?.totalPages ?? Math.ceil((api?.total ?? blogs.length) / limit)}\r\n                basePath=\"/blog\"\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                             Pagination component                            */\r\n/* -------------------------------------------------------------------------- */\r\nfunction Pagination({\r\n  currentPage,\r\n  totalPages,\r\n  basePath,\r\n}: {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  basePath: string;\r\n}) {\r\n  const page = Math.max(1, currentPage || 1);\r\n  const total = Math.max(1, totalPages || 1);\r\n  const showPrev = page > 1;\r\n  const showNext = page < total;\r\n\r\n  const pageNumbers = getPageNumbers(page, total);\r\n\r\n  return (\r\n    <nav aria-label=\"Blog pagination\" className=\"mt-8 flex items-center justify-center\">\r\n      <ul className=\"inline-flex items-center gap-2\">\r\n        <li>\r\n          {showPrev ? (\r\n            <Link href={`${basePath}?page=${page - 1}`} className=\"px-3 py-2 rounded-md bg-white border text-gray-700 hover:bg-gray-50\">\r\n              Previous\r\n            </Link>\r\n          ) : (\r\n            <span className=\"px-3 py-2 rounded-md bg-gray-100 text-gray-400 border\">Previous</span>\r\n          )}\r\n        </li>\r\n\r\n        {pageNumbers.map((p) => (\r\n          <li key={p}>\r\n            {p === page ? (\r\n              <span className=\"px-3 py-2 rounded-md bg-green-600 text-white border\">{p}</span>\r\n            ) : (\r\n              <Link href={`${basePath}?page=${p}`} className=\"px-3 py-2 rounded-md bg-white border text-gray-700 hover:bg-gray-50\">\r\n                {p}\r\n              </Link>\r\n            )}\r\n          </li>\r\n        ))}\r\n\r\n        <li>\r\n          {showNext ? (\r\n            <Link href={`${basePath}?page=${page + 1}`} className=\"px-3 py-2 rounded-md bg-white border text-gray-700 hover:bg-gray-50\">\r\n              Next\r\n            </Link>\r\n          ) : (\r\n            <span className=\"px-3 py-2 rounded-md bg-gray-100 text-gray-400 border\">Next</span>\r\n          )}\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n\r\nfunction getPageNumbers(current: number, total: number) {\r\n  const maxDisplay = 5;\r\n  const pages: number[] = [];\r\n\r\n  if (total <= maxDisplay) {\r\n    for (let i = 1; i <= total; i++) pages.push(i);\r\n    return pages;\r\n  }\r\n\r\n  let start = Math.max(1, current - Math.floor(maxDisplay / 2));\r\n  let end = start + maxDisplay - 1;\r\n\r\n  if (end > total) {\r\n    end = total;\r\n    start = total - maxDisplay + 1;\r\n  }\r\n\r\n  for (let i = start; i <= end; i++) pages.push(i);\r\n  return pages;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}