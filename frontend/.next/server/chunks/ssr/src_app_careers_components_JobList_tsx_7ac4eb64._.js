module.exports=[42237,a=>{"use strict";a.s(["default",()=>g],42237);var b=a.i(87924),c=a.i(72131),d=a.i(46271);let e=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function f({job:a,onSuccess:d}){let[f,g]=c.default.useState(""),[h,i]=c.default.useState(""),[j,k]=c.default.useState(""),[l,m]=c.default.useState(""),[n,o]=c.default.useState(null),[p,q]=c.default.useState(!1),[r,s]=c.default.useState(null),[t,u]=c.default.useState(null),[v,w]=c.default.useState(null),x=[".pdf",".doc",".docx"],y=async b=>{b.preventDefault(),u(null),w(null);let c=function(){if(!f.trim())return"Full name is required";if(!h.trim())return"Email is required";if(!j.trim())return"Phone is required";if(!n)return"Please attach your CV (PDF/DOC/DOCX)";let a=n.name.slice((n.name.lastIndexOf(".")-1>>>0)+2).toLowerCase();return x.includes(`.${a}`)?n.size>5242880?"CV must be smaller than 5 MB":null:"CV must be a PDF, DOC or DOCX file"}();if(c)return void u(c);try{q(!0),s(0);let b=new FormData;b.append("jobId",a._id),b.append("fullName",f),b.append("email",h),b.append("phone",j),l&&b.append("coverLetter",l),n&&b.append("cv",n,n.name),await new Promise((a,c)=>{let f=new XMLHttpRequest;f.open("POST",`${e}/api/careers/apply`,!0),f.upload.onprogress=a=>{a.lengthComputable&&s(Math.round(a.loaded/a.total*100))},f.onload=()=>{if(q(!1),s(null),f.status>=200&&f.status<300)try{let b=JSON.parse(f.responseText);w(b.message||"Application submitted successfully"),g(""),i(""),k(""),m(""),o(null),d&&d(),a()}catch{a()}else{let a=`Submission failed (${f.status})`;try{let b=JSON.parse(f.responseText);a=b?.message||b?.errors?.[0]?.msg||a}catch{}u(a),c(Error(a))}},f.onerror=()=>{q(!1),s(null),u("Network error. Please try again."),c(Error("Network error"))},f.setRequestHeader("Accept","application/json"),f.send(b)})}catch(a){a instanceof Error?u(a.message||"Failed to submit application"):u("Failed to submit application"),q(!1),s(null)}};return(0,b.jsxs)("form",{onSubmit:y,className:"bg-emerald-50 rounded-2xl p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold",children:["Apply for ",a.title]}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Fill this form and attach your CV."}),(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsx)("input",{value:f,onChange:a=>g(a.target.value),placeholder:"Full name",className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-emerald-200"}),(0,b.jsx)("input",{value:h,onChange:a=>i(a.target.value),placeholder:"Email address",type:"email",className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-emerald-200"}),(0,b.jsx)("input",{value:j,onChange:a=>k(a.target.value),placeholder:"Phone number",className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-emerald-200"}),(0,b.jsx)("textarea",{value:l,onChange:a=>m(a.target.value),placeholder:"Cover letter (optional, max 1500 characters)",className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-emerald-200 min-h-[120px]"}),(0,b.jsxs)("label",{className:"block",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-700",children:["Attach CV (PDF, DOC, DOCX, max ",5,"MB)"]}),(0,b.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,application/msword,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:a=>{u(null),o(a.target.files?.[0]??null)},className:"mt-2","aria-label":"Upload CV",required:!0}),n&&(0,b.jsxs)("div",{className:"text-xs text-slate-600 mt-1",children:[n.name," • ",(n.size/1024/1024).toFixed(2)," MB"]})]}),null!==r&&(0,b.jsxs)("div",{className:"w-full bg-slate-200 rounded-full h-2 mt-2",children:[(0,b.jsx)("div",{style:{width:`${r}%`},className:"h-2 rounded-full bg-emerald-600"}),(0,b.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[r,"%"]})]}),t&&(0,b.jsx)("div",{className:"text-sm text-red-600",children:t}),v&&(0,b.jsx)("div",{className:"text-sm text-emerald-700",children:v}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 rounded-2xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition disabled:opacity-60",children:p?"Submitting…":"Submit Application"}),(0,b.jsx)("button",{type:"button",onClick:()=>{g(""),i(""),k(""),m(""),o(null),u(null),w(null)},className:"px-4 py-2 rounded-2xl border text-sm",children:"Reset"})]})]})]})}function g({jobs:a}){let[e,g]=c.default.useState(null);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[0===a.length&&(0,b.jsxs)("div",{className:"p-8 bg-white rounded-2xl shadow text-center col-span-full",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"No vacancies right now"}),(0,b.jsx)("p",{className:"text-slate-500 mt-2",children:"Check back later — new roles are posted frequently."})]}),a.map(a=>(0,b.jsxs)(d.motion.article,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-white p-6 rounded-2xl shadow hover:shadow-lg transition",children:[(0,b.jsx)("h3",{className:"text-lg font-bold",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:[a.location," • ",a.type]}),(0,b.jsx)("p",{className:"mt-2 text-slate-700 line-clamp-3",children:a.description}),(0,b.jsx)("button",{onClick:()=>g(a),className:"mt-3 px-4 py-2 rounded-2xl bg-emerald-600 text-white text-sm hover:bg-emerald-700",children:"Apply Now"})]},a._id))]}),e&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,b.jsx)("button",{onClick:()=>g(null),className:"absolute top-4 right-4 text-slate-500 hover:text-slate-900",children:"✕"}),(0,b.jsx)(f,{job:e,onSuccess:()=>g(null)})]})})]})}}];

//# sourceMappingURL=src_app_careers_components_JobList_tsx_7ac4eb64._.js.map