{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\n/**\r\n * Utility to merge Tailwind + conditional classes.\r\n * Example: cn(\"p-2\", isActive && \"bg-blue-500\")\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-red-500 text-white hover:bg-red-600\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"underline-offset-4 hover:underline text-primary\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 px-3 rounded-md\",\r\n        lg: \"h-11 px-8 rounded-md\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,wQACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAGF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Card container — provides padding, rounded corners, and shadow.\r\n */\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\n/**\r\n * CardContent — section inside Card for content layout.\r\n */\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-4 md:p-6\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\n/**\r\n * CardHeader — optional header for titles, actions, etc.\r\n */\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-between p-4 md:p-6 border-b\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\n/**\r\n * CardFooter — optional footer for buttons, metadata, etc.\r\n */\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-end p-4 md:p-6 border-t\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardContent, CardHeader, CardFooter };\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;;AAEA;;CAEC,GACD,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oFACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB;;CAEC,GACD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,cAAc;QAAa,GAAG,KAAK;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B;;CAEC,GACD,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB;;CAEC,GACD,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>;\r\n\r\n/**\r\n * Reusable input component with consistent styling and improved text contrast.\r\n */\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type = \"text\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          // Base styles\r\n          \"flex h-11 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white\",\r\n          // Placeholder + focus\r\n          \"placeholder:text-gray-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\",\r\n          // Disabled state\r\n          \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA;;CAEC,GACD,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,MAAM,EAAE,GAAG,OAAO,EAAE;IACvC,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,cAAc;QACd,iHACA,sBAAsB;QACtB,qIACA,iBAAiB;QACjB,mDACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto rounded-lg border border-gray-200\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\nTable.displayName = \"Table\";\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b bg-gray-50\", className)} {...props} />\r\n));\r\nTableHeader.displayName = \"TableHeader\";\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0 divide-y divide-gray-200\", className)}\r\n    {...props}\r\n  />\r\n));\r\nTableBody.displayName = \"TableBody\";\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"hover:bg-gray-50 transition-colors data-[state=selected]:bg-gray-100\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTableRow.displayName = \"TableRow\";\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-gray-700\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTableHead.displayName = \"TableHead\";\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle text-gray-900\", className)}\r\n    {...props}\r\n  />\r\n));\r\nTableCell.displayName = \"TableCell\";\r\n\r\nexport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAEpF,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,uDAAuD;QACpE,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kCAAkC;QAC/C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nexport function Badge({ className, ...props }: BadgeProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAIO,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAmB;IACvD,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,2EACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/jobs/JobRow.tsx"],"sourcesContent":["// frontend/src/app/admin/jobs/JobRow.tsx\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\nimport type { Job } from \"./types\";\r\nimport { Pencil, Trash2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface JobRowProps {\r\n  job: Job;\r\n  onEdit: (job: Job) => void;\r\n  onDelete: (jobId: string) => void;\r\n}\r\n\r\nexport default function JobRow({ job, onEdit, onDelete }: JobRowProps) {\r\n  const handleEdit = () => onEdit(job);\r\n\r\n  const handleDelete = () => {\r\n    // Be defensive: only call onDelete when there's an id\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const id = job._id ?? (job as any).id; // fallback if your API returns `id` instead of `_id`\r\n    if (!id) {\r\n      // nothing to delete — you could show a toast instead\r\n       \r\n      console.warn(\"Attempted to delete job but no id present:\", job);\r\n      return;\r\n    }\r\n\r\n    if (confirm(`Are you sure you want to delete job \"${job.title}\"?`)) {\r\n      onDelete(String(id));\r\n    }\r\n  };\r\n\r\n  // normalize status values from different sources (Open/Closed | active/closed/draft)\r\n  const rawStatus = (job as Partial<Job> & Record<string, unknown>).status as string | undefined;\r\n  const statusKey = (rawStatus ?? \"\").toString().toLowerCase();\r\n\r\n  let statusLabel = \"Unknown\";\r\n  let statusClass = \"bg-gray-100 text-gray-800\";\r\n\r\n  if (statusKey === \"open\" || statusKey === \"active\") {\r\n    statusLabel = \"Open\";\r\n    statusClass = \"bg-green-100 text-green-800\";\r\n  } else if (statusKey === \"closed\") {\r\n    statusLabel = \"Closed\";\r\n    statusClass = \"bg-red-100 text-red-800\";\r\n  } else if (statusKey === \"draft\") {\r\n    statusLabel = \"Draft\";\r\n    statusClass = \"bg-yellow-100 text-yellow-800\";\r\n  }\r\n\r\n  // deadline display (safe)\r\n  const deadlineDisplay = (() => {\r\n    try {\r\n      return job.applicationDeadline ? new Date(job.applicationDeadline).toLocaleDateString() : \"-\";\r\n    } catch {\r\n      return \"-\";\r\n    }\r\n  })();\r\n\r\n  const createdDisplay = (() => {\r\n    try {\r\n      return job.createdAt\r\n        ? formatDistanceToNow(new Date(job.createdAt), { addSuffix: true })\r\n        : \"-\";\r\n    } catch {\r\n      return \"-\";\r\n    }\r\n  })();\r\n\r\n  return (\r\n    <tr className=\"hover:bg-gray-50 transition-colors\">\r\n      {/* Title + Department */}\r\n      <td className=\"px-4 py-3\">\r\n        <div className=\"font-medium text-gray-900\">{job.title}</div>\r\n        {job.department && <div className=\"text-xs text-gray-500\">{job.department}</div>}\r\n      </td>\r\n\r\n      {/* Location */}\r\n      <td className=\"px-4 py-3 text-gray-700\">{job.location ?? \"-\"}</td>\r\n\r\n      {/* Type */}\r\n      <td className=\"px-4 py-3 text-gray-700\">{job.type ?? \"-\"}</td>\r\n\r\n      {/* Status */}\r\n      <td className=\"px-4 py-3\">\r\n        <Badge className={statusClass}>{statusLabel}</Badge>\r\n      </td>\r\n\r\n      {/* Deadline */}\r\n      <td className=\"px-4 py-3 text-gray-700\">{deadlineDisplay}</td>\r\n\r\n      {/* Created */}\r\n      <td className=\"px-4 py-3 text-gray-500 text-sm\">{createdDisplay}</td>\r\n\r\n      {/* Actions */}\r\n      <td className=\"px-4 py-3 flex gap-2 justify-end\">\r\n        <Button variant=\"outline\" size=\"sm\" onClick={handleEdit} className=\"flex items-center gap-1\">\r\n          <Pencil size={16} /> Edit\r\n        </Button>\r\n        <Button variant=\"destructive\" size=\"sm\" onClick={handleDelete} className=\"flex items-center gap-1\">\r\n          <Trash2 size={16} /> Delete\r\n        </Button>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;AAKzC;AAAA;AACA;AACA;AACA;AAPA;;;;;;AAee,SAAS,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAe;IACnE,MAAM,aAAa,IAAM,OAAO;IAEhC,MAAM,eAAe;QACnB,sDAAsD;QACtD,8DAA8D;QAC9D,MAAM,KAAK,IAAI,GAAG,IAAI,AAAC,IAAY,EAAE,EAAE,qDAAqD;QAC5F,IAAI,CAAC,IAAI;YACP,qDAAqD;YAErD,QAAQ,IAAI,CAAC,8CAA8C;YAC3D;QACF;QAEA,IAAI,QAAQ,CAAC,qCAAqC,EAAE,IAAI,KAAK,CAAC,EAAE,CAAC,GAAG;YAClE,SAAS,OAAO;QAClB;IACF;IAEA,qFAAqF;IACrF,MAAM,YAAY,AAAC,IAA+C,MAAM;IACxE,MAAM,YAAY,CAAC,aAAa,EAAE,EAAE,QAAQ,GAAG,WAAW;IAE1D,IAAI,cAAc;IAClB,IAAI,cAAc;IAElB,IAAI,cAAc,UAAU,cAAc,UAAU;QAClD,cAAc;QACd,cAAc;IAChB,OAAO,IAAI,cAAc,UAAU;QACjC,cAAc;QACd,cAAc;IAChB,OAAO,IAAI,cAAc,SAAS;QAChC,cAAc;QACd,cAAc;IAChB;IAEA,0BAA0B;IAC1B,MAAM,kBAAkB,CAAC;QACvB,IAAI;YACF,OAAO,IAAI,mBAAmB,GAAG,IAAI,KAAK,IAAI,mBAAmB,EAAE,kBAAkB,KAAK;QAC5F,EAAE,OAAM;YACN,OAAO;QACT;IACF,CAAC;IAED,MAAM,iBAAiB,CAAC;QACtB,IAAI;YACF,OAAO,IAAI,SAAS,GAChB,IAAA,yKAAmB,EAAC,IAAI,KAAK,IAAI,SAAS,GAAG;gBAAE,WAAW;YAAK,KAC/D;QACN,EAAE,OAAM;YACN,OAAO;QACT;IACF,CAAC;IAED,qBACE,8OAAC;QAAG,WAAU;;0BAEZ,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;kCAA6B,IAAI,KAAK;;;;;;oBACpD,IAAI,UAAU,kBAAI,8OAAC;wBAAI,WAAU;kCAAyB,IAAI,UAAU;;;;;;;;;;;;0BAI3E,8OAAC;gBAAG,WAAU;0BAA2B,IAAI,QAAQ,IAAI;;;;;;0BAGzD,8OAAC;gBAAG,WAAU;0BAA2B,IAAI,IAAI,IAAI;;;;;;0BAGrD,8OAAC;gBAAG,WAAU;0BACZ,cAAA,8OAAC,0IAAK;oBAAC,WAAW;8BAAc;;;;;;;;;;;0BAIlC,8OAAC;gBAAG,WAAU;0BAA2B;;;;;;0BAGzC,8OAAC;gBAAG,WAAU;0BAAmC;;;;;;0BAGjD,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC,4IAAM;wBAAC,SAAQ;wBAAU,MAAK;wBAAK,SAAS;wBAAY,WAAU;;0CACjE,8OAAC,gNAAM;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEtB,8OAAC,4IAAM;wBAAC,SAAQ;wBAAc,MAAK;wBAAK,SAAS;wBAAc,WAAU;;0CACvE,8OAAC,oNAAM;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;AAK9B","debugId":null}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/lib/api.ts"],"sourcesContent":["// frontend/src/lib/api.ts\r\nimport axios, {\r\n  type AxiosInstance,\r\n  type AxiosError,\r\n  type InternalAxiosRequestConfig,\r\n  type AxiosRequestHeaders,\r\n} from \"axios\";\r\n\r\n// -----------------------------------------------------------------------------\r\n// Base URL (from env) - remove trailing slash if present\r\n// -----------------------------------------------------------------------------\r\nconst API_BASE = (process.env.NEXT_PUBLIC_API_URL ?? \"\").replace(/\\/$/, \"\");\r\n\r\n// -----------------------------------------------------------------------------\r\n// Token helpers\r\n// -----------------------------------------------------------------------------\r\nconst ACCESS_TOKEN_KEY = \"fahari_access_token\";\r\n\r\nfunction getStoredToken(): string | null {\r\n  try {\r\n    if (typeof window === \"undefined\") return null;\r\n    return localStorage.getItem(ACCESS_TOKEN_KEY);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction storeToken(token?: string | null) {\r\n  try {\r\n    if (typeof window === \"undefined\") return;\r\n    if (token) localStorage.setItem(ACCESS_TOKEN_KEY, token);\r\n    else localStorage.removeItem(ACCESS_TOKEN_KEY);\r\n  } catch {\r\n    // ignore storage errors\r\n  }\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// Types\r\n// -----------------------------------------------------------------------------\r\ninterface ExtendedRequestConfig extends InternalAxiosRequestConfig {\r\n  _retry?: boolean;\r\n}\r\n\r\ntype QueuedRequest = {\r\n  resolve: (value?: unknown) => void;\r\n  reject: (reason?: unknown) => void;\r\n  config: ExtendedRequestConfig;\r\n};\r\n\r\ninterface RefreshResponse {\r\n  success?: boolean;\r\n  data?: { token?: string } | null;\r\n  token?: string | null;\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// Axios instance\r\n// -----------------------------------------------------------------------------\r\nconst api: AxiosInstance = axios.create({\r\n  baseURL: API_BASE || undefined,\r\n  withCredentials: true,\r\n});\r\n\r\n// -----------------------------------------------------------------------------\r\n// Request interceptor: attach Authorization\r\n// -----------------------------------------------------------------------------\r\napi.interceptors.request.use(\r\n  (config: InternalAxiosRequestConfig) => {\r\n    if (!config.headers) {\r\n      config.headers = {} as AxiosRequestHeaders;\r\n    }\r\n\r\n    const token = getStoredToken();\r\n    if (token) {\r\n      (config.headers as AxiosRequestHeaders)[\"Authorization\"] = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// -----------------------------------------------------------------------------\r\n// Response interceptor: refresh-on-401 with queueing\r\n// -----------------------------------------------------------------------------\r\nlet isRefreshing = false;\r\nlet failedQueue: QueuedRequest[] = [];\r\n\r\nconst processQueue = (error: unknown, token: string | null = null) => {\r\n  for (const queued of failedQueue) {\r\n    if (error) {\r\n      queued.reject(error);\r\n    } else {\r\n      if (token && queued.config.headers) {\r\n        (queued.config.headers as AxiosRequestHeaders)[\"Authorization\"] = `Bearer ${token}`;\r\n      }\r\n      queued.resolve(api(queued.config));\r\n    }\r\n  }\r\n  failedQueue = [];\r\n};\r\n\r\napi.interceptors.response.use(\r\n  (resp) => resp,\r\n  async (err: AxiosError) => {\r\n    const originalRequest = err.config as ExtendedRequestConfig | undefined;\r\n    if (!originalRequest) return Promise.reject(err);\r\n\r\n    if (err.response?.status === 401 && !originalRequest._retry) {\r\n      if (isRefreshing) {\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject, config: originalRequest });\r\n        });\r\n      }\r\n\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n\r\n      try {\r\n        const refreshResp = await axios.post<RefreshResponse>(\r\n          `${API_BASE}/api/admin/refresh`, // ✅ adjust if backend differs\r\n          {},\r\n          { withCredentials: true }\r\n        );\r\n\r\n        const refreshData = refreshResp.data;\r\n        const newToken = refreshData?.data?.token ?? refreshData?.token ?? null;\r\n\r\n        if (newToken && typeof newToken === \"string\") {\r\n          storeToken(newToken);\r\n        } else {\r\n          storeToken(null);\r\n          if (typeof window !== \"undefined\") {\r\n            window.location.href = \"/admin/login\";\r\n          }\r\n          return Promise.reject(err);\r\n        }\r\n\r\n        const tokenToUse = getStoredToken();\r\n        processQueue(null, tokenToUse ?? null);\r\n\r\n        if (tokenToUse && originalRequest.headers) {\r\n          (originalRequest.headers as AxiosRequestHeaders)[\"Authorization\"] =\r\n            `Bearer ${tokenToUse}`;\r\n        }\r\n\r\n        return api(originalRequest);\r\n      } catch (refreshError) {\r\n        processQueue(refreshError, null);\r\n        storeToken(null);\r\n        if (typeof window !== \"undefined\") {\r\n          window.location.href = \"/admin/login\";\r\n        }\r\n        return Promise.reject(refreshError);\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 719, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,kSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAGF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface LabelProps\r\n  extends React.LabelHTMLAttributes<HTMLLabelElement> {}\r\n\r\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <label\r\n        ref={ref}\r\n        className={cn(\r\n          \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nLabel.displayName = \"Label\";\r\n\r\nexport { Label };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;AAGf;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/jobs/JobModal.tsx"],"sourcesContent":["// frontend/src/app/admin/jobs/JobModal.tsx\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport api from \"@/lib/api\";\r\nimport axios, { type AxiosError } from \"axios\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { X, Save, Trash } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nexport interface JobPayload {\r\n  title: string;\r\n  slug?: string;\r\n  description: string;\r\n  location: string;\r\n  type: string;\r\n  department?: string;\r\n  salaryRange?: string;\r\n  requirements?: string[];\r\n  responsibilities?: string[];\r\n  tags?: string[];\r\n  applicationDeadline?: string | null;\r\n  status?: \"active\" | \"closed\" | \"draft\";\r\n}\r\n\r\nexport type Job = JobPayload & { _id?: string; createdAt?: string };\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  initialData?: Job | null;\r\n  onSaved?: (job: Job) => void;\r\n}\r\n\r\n/** API response shape used by backend */\r\ninterface ApiResponse<T = unknown> {\r\n  success: boolean;\r\n  data?: T;\r\n  message?: string;\r\n  code?: string;\r\n}\r\n\r\n/** Helper to extract a usable error message from unknown error */\r\nfunction extractErrorMessage(err: unknown, fallback = \"An error occurred\"): string {\r\n  if (axios.isAxiosError(err)) {\r\n    const axiosErr = err as AxiosError;\r\n    const data = axiosErr.response?.data as ApiResponse | undefined;\r\n    if (data && typeof data === \"object\" && data.message) return String(data.message);\r\n    if (axiosErr.message) return axiosErr.message;\r\n    return fallback;\r\n  }\r\n  if (err instanceof Error) return err.message;\r\n  try {\r\n    return String(err);\r\n  } catch {\r\n    return fallback;\r\n  }\r\n}\r\n\r\nexport default function JobModal({ isOpen, onClose, initialData = null, onSaved }: Props): React.ReactElement | null {\r\n  const queryClient = useQueryClient();\r\n  const API_BASE = (process.env.NEXT_PUBLIC_API_URL ?? \"\").replace(/\\/$/, \"\");\r\n\r\n  // form state\r\n  const [title, setTitle] = useState(\"\");\r\n  const [slug, setSlug] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [type, setType] = useState(\"Full-time\");\r\n  const [department, setDepartment] = useState(\"\");\r\n  const [salaryRange, setSalaryRange] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [requirements, setRequirements] = useState<string[]>([]);\r\n  const [responsibilities, setResponsibilities] = useState<string[]>([]);\r\n  const [tags, setTags] = useState<string[]>([]);\r\n  const [tagInput, setTagInput] = useState(\"\");\r\n  const [applicationDeadline, setApplicationDeadline] = useState<string | null>(null);\r\n  const [status, setStatus] = useState<JobPayload[\"status\"]>(\"active\");\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  const firstInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  // reset form when modal opens for create/edit\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    setTitle(initialData?.title ?? \"\");\r\n    setSlug(initialData?.slug ?? \"\");\r\n    setLocation(initialData?.location ?? \"\");\r\n    setType(initialData?.type ?? \"Full-time\");\r\n    setDepartment(initialData?.department ?? \"\");\r\n    setSalaryRange(initialData?.salaryRange ?? \"\");\r\n    setDescription(initialData?.description ?? \"\");\r\n    setRequirements(initialData?.requirements ?? []);\r\n    setResponsibilities(initialData?.responsibilities ?? []);\r\n    setTags(initialData?.tags ?? []);\r\n    setApplicationDeadline(\r\n      initialData?.applicationDeadline ? formatDateForInput(initialData.applicationDeadline) : null\r\n    );\r\n    setStatus(initialData?.status ?? \"active\");\r\n    setErrors({});\r\n    // focus after paint\r\n    setTimeout(() => firstInputRef.current?.focus(), 50);\r\n  }, [isOpen, initialData]);\r\n\r\n  // helpers\r\n  function slugify(value: string) {\r\n    return value.toLowerCase().trim().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)+/g, \"\");\r\n  }\r\n\r\n  function formatDateForInput(d: string | Date) {\r\n    const date = new Date(d);\r\n    if (Number.isNaN(date.getTime())) return null;\r\n    return date.toISOString().split(\"T\")[0]; // YYYY-MM-DD\r\n  }\r\n\r\n  function validate(): boolean {\r\n    const e: Record<string, string> = {};\r\n    if (!title.trim()) e.title = \"Title is required\";\r\n    if (!description.trim() || description.trim().length < 20) e.description = \"Description must be at least 20 characters\";\r\n    if (!location.trim()) e.location = \"Location is required\";\r\n    if (!type) e.type = \"Type is required\";\r\n    if (applicationDeadline) {\r\n      const d = new Date(applicationDeadline);\r\n      const today = new Date();\r\n      d.setHours(0, 0, 0, 0);\r\n      today.setHours(0, 0, 0, 0);\r\n      if (d < today) e.applicationDeadline = \"Deadline cannot be in the past\";\r\n    }\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  }\r\n\r\n  // mutation for create/update (uses centralized api client with interceptors)\r\n  const mutation = useMutation<ApiResponse<Job>, unknown, JobPayload>({\r\n    mutationFn: async (body: JobPayload) => {\r\n      if (initialData?._id) {\r\n        const url = `${API_BASE}/api/careers/jobs/${encodeURIComponent(initialData._id)}`;\r\n        const res = await api.patch<ApiResponse<Job>>(url, body); // api adds creds + Authorization + refresh\r\n        return res.data;\r\n      }\r\n\r\n      const url = `${API_BASE}/api/careers/jobs`;\r\n      const res = await api.post<ApiResponse<Job>>(url, body);\r\n      return res.data;\r\n    },\r\n    onSuccess: (resp) => {\r\n      const job = resp?.data;\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-jobs\"] });\r\n      if (job) onSaved?.(job);\r\n      onClose();\r\n    },\r\n    onError: (err: unknown) => {\r\n      if (axios.isAxiosError(err) && err.response?.status === 401) {\r\n        setErrors({ form: \"Unauthorized — please sign in and try again.\" });\r\n        return;\r\n      }\r\n      const msg = extractErrorMessage(err, \"Failed to save job\");\r\n      setErrors({ form: msg });\r\n    },\r\n  });\r\n\r\n  // event handlers\r\n  const handleAddTag = () => {\r\n    const v = tagInput.trim();\r\n    if (!v) return;\r\n    const newTags = Array.from(new Set([...tags, ...v.split(/[,;\\s]+/).map((t) => t.trim()).filter(Boolean)]));\r\n    setTags(newTags);\r\n    setTagInput(\"\");\r\n  };\r\n\r\n  const handleSubmit = async (e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSaving(true);\r\n\r\n    const payload: JobPayload = {\r\n      title: title.trim(),\r\n      slug: slug ? slugify(slug) : slugify(title),\r\n      description: description.trim(),\r\n      location: location.trim(),\r\n      type,\r\n      department: department || undefined,\r\n      salaryRange: salaryRange || undefined,\r\n      requirements: requirements.filter(Boolean),\r\n      responsibilities: responsibilities.filter(Boolean),\r\n      tags: tags.filter(Boolean),\r\n      applicationDeadline: applicationDeadline ? new Date(applicationDeadline).toISOString() : null,\r\n      status,\r\n    };\r\n\r\n    try {\r\n      await mutation.mutateAsync(payload);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteJob = async () => {\r\n    if (!initialData?._id) return;\r\n    if (!confirm(\"Delete this job? This action is permanent.\")) return;\r\n    setIsSaving(true);\r\n    try {\r\n      await api.delete(`${API_BASE}/api/careers/jobs/${encodeURIComponent(initialData._id)}`);\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-jobs\"] });\r\n      onClose();\r\n    } catch (err: unknown) {\r\n      if (axios.isAxiosError(err) && err.response?.status === 401) {\r\n        setErrors({ form: \"Unauthorized — please sign in and try again.\" });\r\n      } else {\r\n        const msg = extractErrorMessage(err, \"Delete failed\");\r\n        setErrors({ form: msg });\r\n      }\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isSaving) onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black/50\" onClick={handleClose} />\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"relative z-10 w-full max-w-3xl bg-white rounded-2xl shadow-lg overflow-auto max-h-[90vh]\"\r\n        aria-labelledby=\"job-modal-title\"\r\n      >\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <h3 id=\"job-modal-title\" className=\"text-lg font-semibold\">\r\n            {initialData ? \"Edit Job\" : \"Create Job\"}\r\n          </h3>\r\n          <div className=\"flex items-center gap-2\">\r\n            {initialData?._id && (\r\n              <Button type=\"button\" variant=\"destructive\" onClick={handleDeleteJob} disabled={isSaving}>\r\n                <Trash size={14} />\r\n              </Button>\r\n            )}\r\n            <Button type=\"button\" variant=\"ghost\" onClick={handleClose} aria-label=\"Close modal\">\r\n              <X size={18} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-4\">\r\n          {errors.form && <div className=\"text-sm text-red-600\">{errors.form}</div>}\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label>Title</Label>\r\n              <Input ref={firstInputRef} value={title} onChange={(e) => setTitle(e.target.value)} />\r\n              {errors.title && <p className=\"text-xs text-red-600 mt-1\">{errors.title}</p>}\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Slug (optional)</Label>\r\n              <Input\r\n                value={slug}\r\n                onChange={(e) => setSlug(e.target.value)}\r\n                placeholder=\"auto-generated from title\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Location</Label>\r\n              <Input value={location} onChange={(e) => setLocation(e.target.value)} />\r\n              {errors.location && <p className=\"text-xs text-red-600 mt-1\">{errors.location}</p>}\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Type</Label>\r\n              <select\r\n                className=\"w-full border rounded px-3 py-2\"\r\n                value={type}\r\n                onChange={(e) => setType(e.target.value)}\r\n              >\r\n                <option>Full-time</option>\r\n                <option>Part-time</option>\r\n                <option>Contract</option>\r\n                <option>Internship</option>\r\n                <option>Temporary</option>\r\n                <option>Remote</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Department</Label>\r\n              <Input value={department} onChange={(e) => setDepartment(e.target.value)} />\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Salary Range</Label>\r\n              <Input\r\n                value={salaryRange}\r\n                onChange={(e) => setSalaryRange(e.target.value)}\r\n                placeholder=\"e.g. KES 40,000 - 60,000\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Label>Description</Label>\r\n              <Textarea rows={6} value={description} onChange={(e) => setDescription(e.target.value)} />\r\n              {errors.description && <p className=\"text-xs text-red-600 mt-1\">{errors.description}</p>}\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Application Deadline</Label>\r\n              <Input\r\n                type=\"date\"\r\n                value={applicationDeadline ?? \"\"}\r\n                onChange={(e) => setApplicationDeadline(e.target.value || null)}\r\n              />\r\n              {errors.applicationDeadline && <p className=\"text-xs text-red-600 mt-1\">{errors.applicationDeadline}</p>}\r\n            </div>\r\n\r\n            <div>\r\n              <Label>Status</Label>\r\n              <select\r\n                className=\"w-full border rounded px-3 py-2\"\r\n                value={status}\r\n                onChange={(e) => setStatus(e.target.value as JobPayload[\"status\"])}\r\n              >\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"draft\">Draft</option>\r\n                <option value=\"closed\">Closed</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* tags */}\r\n          <div>\r\n            <Label>Tags</Label>\r\n            <div className=\"flex gap-2 items-center\">\r\n              <Input\r\n                value={tagInput}\r\n                onChange={(e) => setTagInput(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\") {\r\n                    e.preventDefault();\r\n                    handleAddTag();\r\n                  }\r\n                }}\r\n                placeholder=\"comma separated or press Enter\"\r\n              />\r\n              <Button type=\"button\" onClick={handleAddTag}>\r\n                Add\r\n              </Button>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-2 mt-2\">\r\n              {tags.map((t) => (\r\n                <div key={t} className=\"px-2 py-1 bg-slate-100 rounded flex items-center gap-2\">\r\n                  <span className=\"text-sm\">{t}</span>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setTags((prev) => prev.filter((x) => x !== t))}\r\n                    className=\"text-xs\"\r\n                  >\r\n                    ✕\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end gap-3 mt-4 border-t pt-4\">\r\n            <Button variant=\"ghost\" onClick={handleClose} disabled={isSaving}>\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isSaving}>\r\n              {isSaving ? (\r\n                \"Saving...\"\r\n              ) : (\r\n                <>\r\n                  <Save size={14} className=\"mr-2\" /> Save\r\n                </>\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1544, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/jobs/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport axios, { type AxiosError } from \"axios\";\r\nimport { io, type Socket } from \"socket.io-client\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Card, CardContent } from \"../../../components/ui/card\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableHeader,\r\n  TableRow,\r\n  TableHead as TH,\r\n} from \"../../../components/ui/table\";\r\nimport { PlusCircle } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport JobRow from \"./JobRow\";\r\nimport JobModal from \"./JobModal\";\r\nimport type { Job } from \"./types\";\r\n\r\ninterface ApiJobsResponse {\r\n  success: boolean;\r\n  data: Job[];\r\n  message?: string;\r\n}\r\n\r\nexport default function JobsPage(): React.ReactElement {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [editingJob, setEditingJob] = useState<Job | null>(null);\r\n  const [notAuthorized, setNotAuthorized] = useState(false);\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  // NEXT_PUBLIC_API_URL should include origin and optional /api suffix,\r\n  // e.g. \"http://localhost:5000/api\"\r\n  const rawApi = process.env.NEXT_PUBLIC_API_URL ?? \"\";\r\n  const API_BASE = rawApi.replace(/\\/$/, \"\"); // remove trailing slash\r\n  const SOCKET_ORIGIN = API_BASE.replace(/\\/api\\/?$/, \"\"); // strip /api for socket origin\r\n\r\n  // Keep a single socket instance per mounted JobsPage\r\n  const socketRef = useRef<Socket | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!SOCKET_ORIGIN) return;\r\n\r\n    if (!socketRef.current) {\r\n      socketRef.current = io(SOCKET_ORIGIN, {\r\n        withCredentials: true,\r\n        path: \"/socket.io\",\r\n        transports: [\"websocket\", \"polling\"],\r\n        autoConnect: true,\r\n      });\r\n    }\r\n\r\n    const sock = socketRef.current;\r\n\r\n    const handleJobUpdated = (updatedJob: Job) => {\r\n      queryClient.setQueryData<Job[] | undefined>([\"admin-jobs\", search], (old) => {\r\n        const prev = Array.isArray(old) ? old.slice() : [];\r\n        const idx = prev.findIndex((j) => j._id === updatedJob._id);\r\n        if (idx >= 0) {\r\n          prev[idx] = updatedJob;\r\n          return prev;\r\n        }\r\n        return [updatedJob, ...prev];\r\n      });\r\n    };\r\n\r\n    const handleJobDeleted = (deletedJobId: string) => {\r\n      queryClient.setQueryData<Job[] | undefined>([\"admin-jobs\", search], (old) => {\r\n        const prev = Array.isArray(old) ? old.slice() : [];\r\n        return prev.filter((j) => j._id !== deletedJobId);\r\n      });\r\n    };\r\n\r\n    sock.on(\"job-updated\", handleJobUpdated);\r\n    sock.on(\"job-deleted\", handleJobDeleted);\r\n    sock.on(\"connect_error\", (err: unknown) => {\r\n       \r\n      console.warn(\"Socket connect error:\", err);\r\n    });\r\n\r\n    return () => {\r\n      sock.off(\"job-updated\", handleJobUpdated);\r\n      sock.off(\"job-deleted\", handleJobDeleted);\r\n      try {\r\n        sock.disconnect();\r\n      } catch {\r\n        // ignore disconnect errors\r\n      }\r\n      socketRef.current = null;\r\n    };\r\n  }, [SOCKET_ORIGIN, queryClient, search]);\r\n\r\n  // useQuery with minimal options to avoid TS overload issues.\r\n  const { data: jobsData, isLoading, isError, error } = useQuery<Job[], Error>({\r\n    queryKey: [\"admin-jobs\", search],\r\n    queryFn: async (): Promise<Job[]> => {\r\n      try {\r\n        const res = await axios.get<ApiJobsResponse>(\r\n          `${API_BASE}/api/careers/jobs?q=${encodeURIComponent(search)}`,\r\n          { withCredentials: true }\r\n        );\r\n        return res.data?.data ?? [];\r\n      } catch (err: unknown) {\r\n        if (axios.isAxiosError(err) && (err as AxiosError).response?.status === 401) {\r\n          setNotAuthorized(true);\r\n        }\r\n        // rethrow as Error so react-query marks query as errored\r\n        throw err instanceof Error ? err : new Error(\"Failed to fetch jobs\");\r\n      }\r\n    },\r\n    // Add only the core, well-typed options to avoid overload discrimination.\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n\r\n  const jobs: Job[] = Array.isArray(jobsData) ? jobsData : [];\r\n\r\n  // Delete job mutation\r\n  const deleteJobMutation = useMutation<void, Error, string>({\r\n    mutationFn: async (id: string) => {\r\n      if (!id) throw new Error(\"Missing job id\");\r\n      await axios.delete(`${API_BASE}/api/careers/jobs/${encodeURIComponent(id)}`, {\r\n        withCredentials: true,\r\n      });\r\n    },\r\n    onSuccess: (_, deletedId) => {\r\n      queryClient.setQueryData<Job[] | undefined>([\"admin-jobs\", search], (old) => {\r\n        const prev = Array.isArray(old) ? old.slice() : [];\r\n        return prev.filter((j) => j._id !== deletedId);\r\n      });\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-jobs\"] });\r\n    },\r\n    onError: (e: Error) => {\r\n       \r\n      console.error(\"Delete job failed:\", e);\r\n    },\r\n  });\r\n\r\n  const handleOpenModal = (job: Job | null = null) => {\r\n    setEditingJob(job);\r\n    setOpenModal(true);\r\n  };\r\n\r\n  return (\r\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Jobs Management</h1>\r\n        <Button className=\"flex items-center gap-2\" onClick={() => handleOpenModal()}>\r\n          <PlusCircle size={18} /> Add Job\r\n        </Button>\r\n      </div>\r\n\r\n      <Card className=\"shadow-md\">\r\n        <CardContent className=\"p-4 space-y-4\">\r\n          <Input\r\n            placeholder=\"Search jobs by title or location...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            aria-label=\"Search jobs\"\r\n          />\r\n\r\n          {isLoading && <p className=\"text-gray-500\">Loading jobs...</p>}\r\n\r\n          {notAuthorized && (\r\n            <div className=\"text-red-600\">\r\n              <p>Not authorized. Please sign in as an admin.</p>\r\n            </div>\r\n          )}\r\n\r\n          {isError && !notAuthorized && (\r\n            <div className=\"text-red-600\">\r\n              <p>Failed to load jobs.</p>\r\n              {axios.isAxiosError(error as unknown) ? (\r\n                <p className=\"text-sm\">\r\n                  {((error as AxiosError<{ message?: string }>)?.response?.data?.message) ??\r\n                    (error instanceof Error ? error.message : \"Unknown error\")}\r\n                </p>\r\n              ) : (\r\n                <p className=\"text-sm\">{error instanceof Error ? error.message : \"Unknown error\"}</p>\r\n              )}\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"mt-2\"\r\n                onClick={() => queryClient.invalidateQueries({ queryKey: [\"admin-jobs\", search] })}\r\n              >\r\n                Retry\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {!isLoading && !isError && jobs.length === 0 && <p className=\"text-gray-500\">No jobs found.</p>}\r\n\r\n          {!isLoading && jobs.length > 0 && (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TH>Title</TH>\r\n                    <TH>Location</TH>\r\n                    <TH>Type</TH>\r\n                    <TH>Status</TH>\r\n                    <TH>Deadline</TH>\r\n                    <TH>Actions</TH>\r\n                  </TableRow>\r\n                </TableHeader>\r\n\r\n                <TableBody>\r\n                  {jobs.map((job, idx) => {\r\n                    const key = job._id ?? `job-${idx}`;\r\n                    return (\r\n                      <JobRow\r\n                        key={key}\r\n                        job={job}\r\n                        onEdit={() => handleOpenModal(job)}\r\n                        onDelete={(jobId: string) => {\r\n                          if (!jobId) return;\r\n                          deleteJobMutation.mutate(jobId);\r\n                        }}\r\n                      />\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <JobModal\r\n        isOpen={openModal}\r\n        onClose={() => setOpenModal(false)}\r\n        initialData={editingJob}\r\n        onSaved={() => queryClient.invalidateQueries({ queryKey: [\"admin-jobs\", search] })}\r\n      />\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}