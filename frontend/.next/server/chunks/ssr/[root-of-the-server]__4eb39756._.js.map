{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\n/**\r\n * Utility to merge Tailwind + conditional classes.\r\n * Example: cn(\"p-2\", isActive && \"bg-blue-500\")\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-red-500 text-white hover:bg-red-600\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"underline-offset-4 hover:underline text-primary\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 px-3 rounded-md\",\r\n        lg: \"h-11 px-8 rounded-md\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,wQACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAGF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Card container — provides padding, rounded corners, and shadow.\r\n */\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\n/**\r\n * CardContent — section inside Card for content layout.\r\n */\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-4 md:p-6\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\n/**\r\n * CardHeader — optional header for titles, actions, etc.\r\n */\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-between p-4 md:p-6 border-b\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\n/**\r\n * CardFooter — optional footer for buttons, metadata, etc.\r\n */\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-end p-4 md:p-6 border-t\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardContent, CardHeader, CardFooter };\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;;AAEA;;CAEC,GACD,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oFACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB;;CAEC,GACD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,cAAc;QAAa,GAAG,KAAK;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B;;CAEC,GACD,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB;;CAEC,GACD,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\n/**\r\n * Reusable input component with consistent styling.\r\n */\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type = \"text\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-11 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white\",\r\n          \"placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\",\r\n          \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA;;CAEC,GACD,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,MAAM,EAAE,GAAG,OAAO,EAAE;IACvC,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,mGACA,qIACA,mDACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto rounded-lg border border-gray-200\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\nTable.displayName = \"Table\";\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b bg-gray-50\", className)} {...props} />\r\n));\r\nTableHeader.displayName = \"TableHeader\";\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0 divide-y divide-gray-200\", className)}\r\n    {...props}\r\n  />\r\n));\r\nTableBody.displayName = \"TableBody\";\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"hover:bg-gray-50 transition-colors data-[state=selected]:bg-gray-100\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTableRow.displayName = \"TableRow\";\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-gray-700\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTableHead.displayName = \"TableHead\";\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle text-gray-900\", className)}\r\n    {...props}\r\n  />\r\n));\r\nTableCell.displayName = \"TableCell\";\r\n\r\nexport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAEpF,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,uDAAuD;QACpE,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kCAAkC;QAC/C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nexport function Badge({ className, ...props }: BadgeProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAIO,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAmB;IACvD,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,2EACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/jobs/JobRow.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Job } from \"./types\";\r\nimport { Pencil, Trash2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface JobRowProps {\r\n  job: Job;\r\n  onEdit: (job: Job) => void;\r\n  onDelete: (jobId: string) => void;\r\n}\r\n\r\nexport default function JobRow({ job, onEdit, onDelete }: JobRowProps) {\r\n  const handleEdit = () => onEdit(job);\r\n\r\n  const handleDelete = () => {\r\n    if (confirm(`Are you sure you want to delete job \"${job.title}\"?`)) {\r\n      onDelete(job._id);\r\n    }\r\n  };\r\n\r\n  const statusColor =\r\n    job.status === \"Open\"\r\n      ? \"bg-green-100 text-green-800\"\r\n      : job.status === \"Closed\"\r\n      ? \"bg-red-100 text-red-800\"\r\n      : \"bg-gray-100 text-gray-800\";\r\n\r\n  return (\r\n    <tr className=\"hover:bg-gray-50 transition-colors\">\r\n      {/* Title + Department */}\r\n      <td className=\"px-4 py-3\">\r\n        <div className=\"font-medium text-gray-900\">{job.title}</div>\r\n        {job.department && (\r\n          <div className=\"text-xs text-gray-500\">{job.department}</div>\r\n        )}\r\n      </td>\r\n\r\n      {/* Location */}\r\n      <td className=\"px-4 py-3 text-gray-700\">{job.location}</td>\r\n\r\n      {/* Type */}\r\n      <td className=\"px-4 py-3 text-gray-700\">{job.type}</td>\r\n\r\n      {/* Status */}\r\n      <td className=\"px-4 py-3\">\r\n        <Badge className={statusColor}>{job.status}</Badge>\r\n      </td>\r\n\r\n      {/* Deadline */}\r\n      <td className=\"px-4 py-3 text-gray-700\">\r\n        {job.applicationDeadline\r\n          ? new Date(job.applicationDeadline).toLocaleDateString()\r\n          : \"-\"}\r\n      </td>\r\n\r\n      {/* Created */}\r\n      <td className=\"px-4 py-3 text-gray-500 text-sm\">\r\n        {job.createdAt\r\n          ? formatDistanceToNow(new Date(job.createdAt), { addSuffix: true })\r\n          : \"-\"}\r\n      </td>\r\n\r\n      {/* Actions */}\r\n      <td className=\"px-4 py-3 flex gap-2 justify-end\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={handleEdit}\r\n          className=\"flex items-center gap-1\"\r\n        >\r\n          <Pencil size={16} /> Edit\r\n        </Button>\r\n        <Button\r\n          variant=\"destructive\"\r\n          size=\"sm\"\r\n          onClick={handleDelete}\r\n          className=\"flex items-center gap-1\"\r\n        >\r\n          <Trash2 size={16} /> Delete\r\n        </Button>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AACA;AACA;AACA;AAPA;;;;;;AAee,SAAS,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAe;IACnE,MAAM,aAAa,IAAM,OAAO;IAEhC,MAAM,eAAe;QACnB,IAAI,QAAQ,CAAC,qCAAqC,EAAE,IAAI,KAAK,CAAC,EAAE,CAAC,GAAG;YAClE,SAAS,IAAI,GAAG;QAClB;IACF;IAEA,MAAM,cACJ,IAAI,MAAM,KAAK,SACX,gCACA,IAAI,MAAM,KAAK,WACf,4BACA;IAEN,qBACE,8OAAC;QAAG,WAAU;;0BAEZ,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;kCAA6B,IAAI,KAAK;;;;;;oBACpD,IAAI,UAAU,kBACb,8OAAC;wBAAI,WAAU;kCAAyB,IAAI,UAAU;;;;;;;;;;;;0BAK1D,8OAAC;gBAAG,WAAU;0BAA2B,IAAI,QAAQ;;;;;;0BAGrD,8OAAC;gBAAG,WAAU;0BAA2B,IAAI,IAAI;;;;;;0BAGjD,8OAAC;gBAAG,WAAU;0BACZ,cAAA,8OAAC,0IAAK;oBAAC,WAAW;8BAAc,IAAI,MAAM;;;;;;;;;;;0BAI5C,8OAAC;gBAAG,WAAU;0BACX,IAAI,mBAAmB,GACpB,IAAI,KAAK,IAAI,mBAAmB,EAAE,kBAAkB,KACpD;;;;;;0BAIN,8OAAC;gBAAG,WAAU;0BACX,IAAI,SAAS,GACV,IAAA,yKAAmB,EAAC,IAAI,KAAK,IAAI,SAAS,GAAG;oBAAE,WAAW;gBAAK,KAC/D;;;;;;0BAIN,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;;0CAEV,8OAAC,gNAAM;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEtB,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;;0CAEV,8OAAC,oNAAM;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;AAK9B","debugId":null}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/lib/axiosAuth.ts"],"sourcesContent":["// frontend/src/lib/axiosAuth.ts\r\nimport axios, { AxiosError, AxiosInstance, AxiosRequestConfig, AxiosRequestHeaders } from \"axios\";\r\n\r\nconst API_BASE = (process.env.NEXT_PUBLIC_API_URL || \"\").replace(/\\/$/, \"\"); // no trailing slash\r\nconst ACCESS_TOKEN_KEY = \"fahari_access_token\";\r\n\r\n/**\r\n * Safely read access token from localStorage (guard for SSR).\r\n */\r\nfunction getAccessToken(): string | null {\r\n  try {\r\n    if (typeof window === \"undefined\") return null;\r\n    return window.localStorage.getItem(ACCESS_TOKEN_KEY);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function setAccessToken(token: string | null) {\r\n  try {\r\n    if (typeof window === \"undefined\") return;\r\n    if (token === null) {\r\n      window.localStorage.removeItem(ACCESS_TOKEN_KEY);\r\n    } else {\r\n      window.localStorage.setItem(ACCESS_TOKEN_KEY, token);\r\n    }\r\n  } catch {\r\n    // ignore storage errors\r\n  }\r\n}\r\n\r\nexport function clearAccessToken() {\r\n  setAccessToken(null);\r\n}\r\n\r\nconst axiosAuth: AxiosInstance = axios.create({\r\n  baseURL: API_BASE || undefined,\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\ntype RetryConfig = AxiosRequestConfig & { _retry?: boolean };\r\n\r\naxiosAuth.interceptors.request.use((config) => {\r\n  const token = getAccessToken();\r\n  if (token) {\r\n    // Ensure headers is a valid AxiosRequestHeaders object\r\n    config.headers = (config.headers ?? {}) as AxiosRequestHeaders;\r\n    config.headers[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\naxiosAuth.interceptors.response.use(\r\n  (resp) => resp,\r\n  async (err: AxiosError) => {\r\n    const originalRequest = err.config as RetryConfig | undefined;\r\n\r\n    if (!originalRequest) return Promise.reject(err);\r\n\r\n    if (err.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n\r\n      try {\r\n        const refreshRes = await axios.post(\r\n          `${API_BASE || \"\"}/api/admin/refresh`,\r\n          {},\r\n          { withCredentials: true }\r\n        );\r\n\r\n        const newToken = refreshRes?.data?.token as string | undefined;\r\n\r\n        if (newToken) {\r\n          setAccessToken(newToken);\r\n\r\n          // ✅ Safe headers assignment with proper type\r\n          originalRequest.headers = (originalRequest.headers ?? {}) as AxiosRequestHeaders;\r\n          originalRequest.headers[\"Authorization\"] = `Bearer ${newToken}`;\r\n\r\n          return axiosAuth.request(originalRequest);\r\n        } else {\r\n          clearAccessToken();\r\n          return Promise.reject(err);\r\n        }\r\n      } catch (refreshError) {\r\n        clearAccessToken();\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default axiosAuth;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;;AAChC;;AAEA,MAAM,WAAW,CAAC,6DAAmC,EAAE,EAAE,OAAO,CAAC,OAAO,KAAK,oBAAoB;AACjG,MAAM,mBAAmB;AAEzB;;CAEC,GACD,SAAS;IACP,IAAI;QACF,wCAAmC,OAAO;;;IAE5C,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,eAAe,KAAoB;IACjD,IAAI;QACF,wCAAmC;;;IAMrC,EAAE,OAAM;IACN,wBAAwB;IAC1B;AACF;AAEO,SAAS;IACd,eAAe;AACjB;AAEA,MAAM,YAA2B,gJAAK,CAAC,MAAM,CAAC;IAC5C,SAAS,YAAY;IACrB,iBAAiB;IACjB,SAAS;QACP,gBAAgB;IAClB;AACF;AAIA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAClC,MAAM,QAAQ;IACd,IAAI,OAAO;QACT,uDAAuD;QACvD,OAAO,OAAO,GAAI,OAAO,OAAO,IAAI,CAAC;QACrC,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IACrD;IACA,OAAO;AACT;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,OAAS,MACV,OAAO;IACL,MAAM,kBAAkB,IAAI,MAAM;IAElC,IAAI,CAAC,iBAAiB,OAAO,QAAQ,MAAM,CAAC;IAE5C,IAAI,IAAI,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC3D,gBAAgB,MAAM,GAAG;QAEzB,IAAI;YACF,MAAM,aAAa,MAAM,gJAAK,CAAC,IAAI,CACjC,GAAG,YAAY,GAAG,kBAAkB,CAAC,EACrC,CAAC,GACD;gBAAE,iBAAiB;YAAK;YAG1B,MAAM,WAAW,YAAY,MAAM;YAEnC,IAAI,UAAU;gBACZ,eAAe;gBAEf,6CAA6C;gBAC7C,gBAAgB,OAAO,GAAI,gBAAgB,OAAO,IAAI,CAAC;gBACvD,gBAAgB,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,UAAU;gBAE/D,OAAO,UAAU,OAAO,CAAC;YAC3B,OAAO;gBACL;gBACA,OAAO,QAAQ,MAAM,CAAC;YACxB;QACF,EAAE,OAAO,cAAc;YACrB;YACA,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 639, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/jobs/JobModal.tsx"],"sourcesContent":["// frontend/src/app/admin/jobs/JobModal.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { X, Save, Trash } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport axiosAuth from \"@/lib/axiosAuth\"; // ✅ use our secure axios instance\r\n\r\nexport interface JobPayload {\r\n  title: string;\r\n  slug?: string;\r\n  description: string;\r\n  location: string;\r\n  type: string;\r\n  department?: string;\r\n  salaryRange?: string;\r\n  requirements?: string[];\r\n  responsibilities?: string[];\r\n  tags?: string[];\r\n  applicationDeadline?: string | null;\r\n  status?: \"active\" | \"closed\" | \"draft\";\r\n}\r\n\r\nexport type Job = JobPayload & { _id?: string; createdAt?: string };\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  initialData?: Job | null;\r\n  onSaved?: (job: Job) => void;\r\n}\r\n\r\ninterface ApiResponse<T = unknown> {\r\n  success: boolean;\r\n  data?: T;\r\n  message?: string;\r\n}\r\n\r\nexport default function JobModal({ isOpen, onClose, initialData = null, onSaved }: Props) {\r\n  const queryClient = useQueryClient();\r\n\r\n  // form state\r\n  const [title, setTitle] = useState(\"\");\r\n  const [slug, setSlug] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [type, setType] = useState(\"Full-time\");\r\n  const [department, setDepartment] = useState(\"\");\r\n  const [salaryRange, setSalaryRange] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [requirements, setRequirements] = useState<string[]>([]);\r\n  const [responsibilities, setResponsibilities] = useState<string[]>([]);\r\n  const [tags, setTags] = useState<string[]>([]);\r\n  const [tagInput, setTagInput] = useState(\"\");\r\n  const [applicationDeadline, setApplicationDeadline] = useState<string | null>(null);\r\n  const [status, setStatus] = useState<JobPayload[\"status\"]>(\"active\");\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const firstInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  // reset form when modal opens\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    setTitle(initialData?.title ?? \"\");\r\n    setSlug(initialData?.slug ?? \"\");\r\n    setLocation(initialData?.location ?? \"\");\r\n    setType(initialData?.type ?? \"Full-time\");\r\n    setDepartment(initialData?.department ?? \"\");\r\n    setSalaryRange(initialData?.salaryRange ?? \"\");\r\n    setDescription(initialData?.description ?? \"\");\r\n    setRequirements(initialData?.requirements ?? []);\r\n    setResponsibilities(initialData?.responsibilities ?? []);\r\n    setTags(initialData?.tags ?? []);\r\n    setApplicationDeadline(initialData?.applicationDeadline ? formatDateForInput(initialData.applicationDeadline) : null);\r\n    setStatus(initialData?.status ?? \"active\");\r\n    setErrors({});\r\n    setTimeout(() => firstInputRef.current?.focus(), 50);\r\n  }, [isOpen, initialData]);\r\n\r\n  function slugify(value: string) {\r\n    return value.toLowerCase().trim().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)+/g, \"\");\r\n  }\r\n\r\n  function formatDateForInput(d: string | Date) {\r\n    const date = new Date(d);\r\n    if (Number.isNaN(date.getTime())) return null;\r\n    return date.toISOString().split(\"T\")[0];\r\n  }\r\n\r\n  function validate(): boolean {\r\n    const e: Record<string, string> = {};\r\n    if (!title.trim()) e.title = \"Title is required\";\r\n    if (!description.trim() || description.trim().length < 20) e.description = \"Description must be at least 20 characters\";\r\n    if (!location.trim()) e.location = \"Location is required\";\r\n    if (!type) e.type = \"Type is required\";\r\n    if (applicationDeadline) {\r\n      const d = new Date(applicationDeadline);\r\n      const today = new Date();\r\n      d.setHours(0, 0, 0, 0);\r\n      today.setHours(0, 0, 0, 0);\r\n      if (d < today) e.applicationDeadline = \"Deadline cannot be in the past\";\r\n    }\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  }\r\n\r\n  // ✅ use axiosAuth for API calls\r\n  const mutation = useMutation<ApiResponse<Job>, unknown, JobPayload>({\r\n    mutationFn: async (body: JobPayload) => {\r\n      if (initialData?._id) {\r\n        const res = await axiosAuth.patch<ApiResponse<Job>>(`/api/careers/jobs/${encodeURIComponent(initialData._id)}`, body);\r\n        return res.data;\r\n      }\r\n      const res = await axiosAuth.post<ApiResponse<Job>>(`/api/careers/jobs`, body);\r\n      return res.data;\r\n    },\r\n    onSuccess: (resp) => {\r\n      const job = resp?.data;\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-jobs\"] });\r\n      if (job) onSaved?.(job);\r\n      onClose();\r\n    },\r\n    onError: (err: any) => {\r\n      let msg = \"Failed to save job\";\r\n      if (err?.response?.data?.message) msg = err.response.data.message;\r\n      else if (err.message) msg = err.message;\r\n      setErrors({ form: msg });\r\n    },\r\n  });\r\n\r\n  const handleAddTag = () => {\r\n    const v = tagInput.trim();\r\n    if (!v) return;\r\n    const newTags = Array.from(new Set([...tags, ...v.split(/[,;\\s]+/).map((t) => t.trim()).filter(Boolean)]));\r\n    setTags(newTags);\r\n    setTagInput(\"\");\r\n  };\r\n\r\n  const handleSubmit = async (e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSaving(true);\r\n\r\n    const payload: JobPayload = {\r\n      title: title.trim(),\r\n      slug: slug ? slugify(slug) : slugify(title),\r\n      description: description.trim(),\r\n      location: location.trim(),\r\n      type,\r\n      department: department || undefined,\r\n      salaryRange: salaryRange || undefined,\r\n      requirements: requirements.filter(Boolean),\r\n      responsibilities: responsibilities.filter(Boolean),\r\n      tags: tags.filter(Boolean),\r\n      applicationDeadline: applicationDeadline ? new Date(applicationDeadline).toISOString() : null,\r\n      status,\r\n    };\r\n\r\n    try {\r\n      await mutation.mutateAsync(payload);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteJob = async () => {\r\n    if (!initialData?._id) return;\r\n    if (!confirm(\"Delete this job? This action is permanent.\")) return;\r\n    try {\r\n      setIsSaving(true);\r\n      await axiosAuth.delete(`/api/careers/jobs/${encodeURIComponent(initialData._id)}`);\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-jobs\"] });\r\n      onClose();\r\n    } catch (err: any) {\r\n      setErrors({ form: err?.response?.data?.message || err.message || \"Delete failed\" });\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black/50\" onClick={() => !isSaving && onClose()} />\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"relative z-10 w-full max-w-3xl bg-white rounded-2xl shadow-lg overflow-auto max-h-[90vh]\"\r\n        aria-labelledby=\"job-modal-title\"\r\n      >\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <h3 id=\"job-modal-title\" className=\"text-lg font-semibold\">{initialData ? \"Edit Job\" : \"Create Job\"}</h3>\r\n          <div className=\"flex items-center gap-2\">\r\n            {initialData?._id && (\r\n              <Button type=\"button\" variant=\"destructive\" onClick={handleDeleteJob} disabled={isSaving}>\r\n                <Trash size={14} />\r\n              </Button>\r\n            )}\r\n            <Button type=\"button\" variant=\"ghost\" onClick={() => !isSaving && onClose()} aria-label=\"Close modal\">\r\n              <X size={18} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-4\">\r\n          {errors.form && <div className=\"text-sm text-red-600\">{errors.form}</div>}\r\n\r\n          {/* Form fields (unchanged UI) */}\r\n          {/* ... same inputs as before ... */}\r\n\r\n          <div className=\"flex items-center justify-end gap-3 mt-4 border-t pt-4\">\r\n            <Button variant=\"ghost\" onClick={() => !isSaving && onClose()} disabled={isSaving}>Cancel</Button>\r\n            <Button type=\"submit\" disabled={isSaving}>\r\n              {isSaving ? \"Saving...\" : (<><Save size={14} className=\"mr-2\" /> Save</>)}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 959, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/jobs/page.tsx"],"sourcesContent":["//frontend\\src\\app\\admin\\jobs\\page.tsx\r\n\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Card, CardContent } from \"../../../components/ui/card\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n  TableHead as TH,\r\n} from \"../../../components/ui/table\";\r\nimport { PlusCircle } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport JobRow from \"./JobRow\";\r\nimport JobModal from \"./JobModal\";\r\nimport type { Job } from \"./types\";\r\n\r\nlet socket: Socket;\r\n\r\nexport default function JobsPage() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [editingJob, setEditingJob] = useState<Job | null>(null);\r\n  const queryClient = useQueryClient();\r\n\r\n  const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"\";\r\n\r\n  // Initialize Socket.IO only once\r\n  useEffect(() => {\r\n    if (!socket) {\r\n      socket = io(API_BASE);\r\n    }\r\n\r\n    socket.on(\"job-updated\", (updatedJob: Job) => {\r\n      queryClient.setQueryData<Job[]>([\"admin-jobs\", search], (old = []) => {\r\n        const index = old.findIndex((j) => j._id === updatedJob._id);\r\n        if (index >= 0) old[index] = updatedJob;\r\n        else old.push(updatedJob);\r\n        return [...old];\r\n      });\r\n    });\r\n\r\n    socket.on(\"job-deleted\", (deletedJobId: string) => {\r\n      queryClient.setQueryData<Job[]>([\"admin-jobs\", search], (old = []) =>\r\n        old.filter((j) => j._id !== deletedJobId)\r\n      );\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"job-updated\");\r\n      socket.off(\"job-deleted\");\r\n    };\r\n  }, [queryClient, search, API_BASE]);\r\n\r\n  // Fetch jobs\r\n  const {\r\n    data: jobs = [],\r\n    isLoading,\r\n    isError,\r\n    error,\r\n  } = useQuery<Job[]>({\r\n    queryKey: [\"admin-jobs\", search],\r\n    queryFn: async () => {\r\n      const res = await axios.get<{ data: Job[] }>(\r\n        `${API_BASE}/api/careers/jobs?q=${encodeURIComponent(search)}`\r\n      );\r\n      return res.data?.data ?? [];\r\n    },\r\n  });\r\n\r\n  // Delete job mutation\r\n  const deleteJobMutation = useMutation<void, unknown, string>({\r\n    mutationFn: async (id: string) => {\r\n      await axios.delete(`${API_BASE}/api/careers/jobs/${encodeURIComponent(id)}`);\r\n    },\r\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: [\"admin-jobs\", search] }),\r\n  });\r\n\r\n  const handleOpenModal = (job: Job | null = null) => {\r\n    setEditingJob(job);\r\n    setOpenModal(true);\r\n  };\r\n\r\n  return (\r\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"p-6 space-y-6\">\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Jobs Management</h1>\r\n        <Button className=\"flex items-center gap-2\" onClick={() => handleOpenModal()}>\r\n          <PlusCircle size={18} /> Add Job\r\n        </Button>\r\n      </div>\r\n\r\n      {/* MAIN CARD */}\r\n      <Card className=\"shadow-md\">\r\n        <CardContent className=\"p-4 space-y-4\">\r\n          {/* SEARCH */}\r\n          <Input\r\n            placeholder=\"Search jobs by title or location...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n\r\n          {/* LOADING */}\r\n          {isLoading && <p className=\"text-green-500\">Loading jobs...</p>}\r\n\r\n          {/* ERROR */}\r\n          {isError && (\r\n            <div className=\"text-red-600\">\r\n              <p>Failed to load jobs.</p>\r\n              {axios.isAxiosError(error) && (\r\n                <p className=\"text-sm\">{error.response?.data?.message || error.message}</p>\r\n              )}\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"mt-2\"\r\n                onClick={() => queryClient.invalidateQueries({ queryKey: [\"admin-jobs\", search] })}\r\n              >\r\n                Retry\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* NO RESULTS */}\r\n          {!isLoading && !isError && jobs.length === 0 && (\r\n            <p className=\"text-green-500\">No jobs found.</p>\r\n          )}\r\n\r\n          {/* JOB LIST */}\r\n          {!isLoading && jobs.length > 0 && (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TH>Title</TH>\r\n                    <TH>Location</TH>\r\n                    <TH>Type</TH>\r\n                    <TH>Status</TH>\r\n                    <TH>Deadline</TH>\r\n                    <TH>Actions</TH>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {jobs.map((job, idx) => {\r\n                    const key = job._id ?? `job-${idx}`;\r\n                    return (\r\n                      <JobRow\r\n                        key={key}\r\n                        job={job}\r\n                        onEdit={() => handleOpenModal(job)}\r\n                        onDelete={() => {\r\n                          const id = job._id;\r\n                          if (!id) return;\r\n                          deleteJobMutation.mutate(id);\r\n                        }}\r\n                      />\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Job Modal */}\r\n      <JobModal\r\n        isOpen={openModal}\r\n        onClose={() => setOpenModal(false)}\r\n        initialData={editingJob}\r\n        onSaved={() => queryClient.invalidateQueries({ queryKey: [\"admin-jobs\", search] })}\r\n      />\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}