module.exports=[71560,a=>{"use strict";a.s(["default",()=>j],71560);var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(50944),f=a.i(88615),g=a.i(27348),h=a.i(1619);let i=()=>{let a=(0,e.useRouter)(),[f,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({title:"",slug:"",location:"",type:"Full-time",description:"",requirements:"",deadline:""}),x=(0,c.useCallback)(async()=>{k(!0),s(null);try{let a=await d.default.get("/api/admin/jobs",{withCredentials:!0});i(a.data.data||[])}catch(b){if(d.default.isAxiosError(b)){let c=b.response?.data;if(b.response?.status===401)return void a.push("/admin/login");s(c?.message||b.message||"Failed to fetch jobs.")}else b instanceof Error?s(b.message):s("An unknown error occurred while fetching jobs.")}finally{k(!1)}},[a]);(0,c.useEffect)(()=>{x()},[x]);let y=()=>{o(!1),q(null),s(null)},z=async a=>{if(confirm("Are you sure you want to delete this job?")){s(null);try{await d.default.delete(`/api/admin/jobs/${a}`,{withCredentials:!0}),i(b=>b.filter(b=>b._id!==a))}catch(a){if(d.default.isAxiosError(a)){let b=a.response?.data;s(b?.message||a.message||"Delete failed")}else a instanceof Error?s(a.message):s("Unknown error during delete.")}}},A=async a=>{if(a&&a.preventDefault(),s(null),!v.title.trim()||!v.location.trim()||!v.description.trim())return void s("Please fill in Title, Location and Description.");u(!0);try{let a={title:v.title.trim(),slug:v.slug.trim()||void 0,location:v.location.trim(),type:v.type,description:v.description.trim(),deadline:v.deadline||void 0,requirements:v.requirements.split("\n").map(a=>a.trim()).filter(Boolean)};if(p){let b=await d.default.patch(`/api/admin/jobs/${p._id}`,a,{withCredentials:!0});i(a=>a.map(a=>a._id===p._id?b.data.data:a))}else{let b=await d.default.post("/api/admin/jobs",a,{withCredentials:!0});i(a=>[b.data.data,...a])}y()}catch(a){if(d.default.isAxiosError(a)){let b=a.response?.data;s(b?.message||a.message||"Save job failed")}else a instanceof Error?s(a.message):s("Unknown error while saving job.")}finally{u(!1)}},B=f.filter(a=>{let b=l.trim().toLowerCase();return!b||a.title.toLowerCase().includes(b)||a.location.toLowerCase().includes(b)||(a.slug||"").toLowerCase().includes(b)});return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Jobs Management"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Create, edit or remove job postings."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by title, location or slug...",value:l,onChange:a=>m(a.target.value),className:"border p-2 rounded w-64","aria-label":"Search jobs"}),(0,b.jsxs)("button",{onClick:()=>{q(null),w({title:"",slug:"",location:"",type:"Full-time",description:"",requirements:"",deadline:""}),s(null),o(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700","aria-label":"Create new job",children:[(0,b.jsx)(g.FiPlus,{className:"mr-2"})," New Job"]})]})]}),r&&(0,b.jsx)("div",{className:"text-red-600 mb-3",children:r}),j?(0,b.jsx)("div",{className:"py-6 text-center text-gray-600",children:"Loading jobs..."}):0===B.length?(0,b.jsx)("div",{className:"py-6 text-center text-gray-600",children:"No jobs found."}):(0,b.jsx)("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,b.jsxs)("table",{className:"w-full table-auto",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Title"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Location"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Type"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:B.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:a.title}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.location}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.type}),(0,b.jsx)("td",{className:"px-4 py-3 capitalize",children:a.status}),(0,b.jsx)("td",{className:"px-4 py-3 text-center",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>(a=>{q(a),w({title:a.title,slug:a.slug||"",location:a.location,type:a.type,description:a.description,requirements:(a.requirements||[]).join("\n"),deadline:a.deadline||""}),s(null),o(!0)})(a),className:"text-blue-600 hover:text-blue-800",title:"Edit job","aria-label":`Edit ${a.title}`,children:(0,b.jsx)(g.FiEdit,{})}),(0,b.jsx)("button",{onClick:()=>z(a._id),className:"text-red-600 hover:text-red-800",title:"Delete job","aria-label":`Delete ${a.title}`,children:(0,b.jsx)(g.FiTrash2,{})})]})})]},a._id))})]})}),n&&(0,b.jsx)(h.default,{title:p?"Edit Job":"New Job",onClose:y,children:(0,b.jsxs)("form",{onSubmit:A,className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Title *",value:v.title,onChange:a=>w(b=>({...b,title:a.target.value})),className:"w-full border p-2 rounded",required:!0}),(0,b.jsx)("input",{type:"text",placeholder:"Slug (optional)",value:v.slug,onChange:a=>w(b=>({...b,slug:a.target.value})),className:"w-full border p-2 rounded"}),(0,b.jsx)("input",{type:"text",placeholder:"Location *",value:v.location,onChange:a=>w(b=>({...b,location:a.target.value})),className:"w-full border p-2 rounded",required:!0}),(0,b.jsxs)("select",{value:v.type,onChange:a=>w(b=>({...b,type:a.target.value})),className:"w-full border p-2 rounded",children:[(0,b.jsx)("option",{children:"Full-time"}),(0,b.jsx)("option",{children:"Part-time"}),(0,b.jsx)("option",{children:"Contract"}),(0,b.jsx)("option",{children:"Internship"}),(0,b.jsx)("option",{children:"Temporary"})]}),(0,b.jsx)("textarea",{placeholder:"Description *",value:v.description,onChange:a=>w(b=>({...b,description:a.target.value})),className:"w-full border p-2 rounded h-28",required:!0}),(0,b.jsx)("textarea",{placeholder:"Requirements (one per line)",value:v.requirements,onChange:a=>w(b=>({...b,requirements:a.target.value})),className:"w-full border p-2 rounded h-24"}),(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm text-slate-700",children:"Application Deadline (optional)"}),(0,b.jsx)("input",{type:"date",value:v.deadline,onChange:a=>w(b=>({...b,deadline:a.target.value})),className:"mt-1 w-full border p-2 rounded"})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 rounded border",disabled:t,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:t,children:t?"Saving...":p?"Update Job":"Create Job"})]})]})})]})},j=()=>{let a=(0,e.useRouter)(),[g,h]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{try{h(!0);let b=await d.default.get("/api/admin/me",{withCredentials:!0});if(!b.data?.success)return void a.push("/admin/login");k(!0)}catch(a){d.default.isAxiosError(a)?m(a.response?.data?.message||"Failed to verify admin session."):a instanceof Error?m(a.message):m("Unexpected error occurred while verifying admin session.")}finally{h(!1)}})()},[a]),g)?(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-[70vh] text-gray-500",children:"Checking admin session..."})}):l?(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-[70vh] text-red-500",children:l})}):j?(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Manage Jobs"}),(0,b.jsx)(i,{})]})}):null}}];

//# sourceMappingURL=src_app_admin_jobs_page_tsx_33802cdd._.js.map