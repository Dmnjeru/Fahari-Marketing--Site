(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88760,e=>{"use strict";e.s(["default",()=>m],88760);var a=e.i(43476),r=e.i(71645),t=e.i(22016),l=e.i(18566),i=e.i(81949);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:d="",children:c,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:a,...o,width:l,height:l,stroke:t,strokeWidth:s?24*Number(i)/Number(l):i,className:n("lucide",d),...!c&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(c)?c:[c]])}),c=((e,a)=>{let t=(0,r.forwardRef)((t,l)=>{let{className:i,...o}=t;return(0,r.createElement)(d,{ref:l,iconNode:a,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...o})});return t.displayName=s(e),t})("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),m=e=>{let{children:s}=e,n=(0,l.useRouter)(),o=(0,l.usePathname)(),[d,m]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{var e,a,r;m(!0);let t=await i.default.get("/api/admin/me",{withCredentials:!0});(null==(e=t.data)?void 0:e.success)&&(null==(r=t.data)||null==(a=r.user)?void 0:a.role)==="admin"?h(!0):n.replace("/admin/login")}catch(e){console.error("Admin auth check failed:",e),g("Failed to verify admin session. Please login again."),n.replace("/admin/login")}finally{m(!1)}})()},[n]);let p=async()=>{try{await i.default.post("/api/admin/logout",{},{withCredentials:!0}),n.replace("/admin/login")}catch(e){console.error("Logout failed:",e),g("Logout failed. Please try again.")}};return d?(0,a.jsxs)("div",{className:"flex items-center justify-center h-screen text-gray-500",children:[(0,a.jsx)(c,{className:"animate-spin mr-2"})," Checking admin session..."]}):u?(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,a.jsxs)("aside",{className:"w-64 bg-white shadow-lg flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"Fahari Admin"})}),(0,a.jsx)("nav",{className:"mt-4 flex flex-col",children:[{href:"/admin",label:"Dashboard"},{href:"/admin/jobs",label:"Jobs"},{href:"/admin/applications",label:"Applications"},{href:"/admin/promos",label:"Promos"},{href:"/admin/gallery",label:"Gallery"},{href:"/admin/testimonials",label:"Testimonials"}].map(e=>{let{href:r,label:l}=e;return(0,a.jsx)(t.default,{href:r,className:"px-6 py-3 hover:bg-gray-100 ".concat(o===r?"bg-gray-200 font-semibold":""),children:l},r)})})]}),(0,a.jsx)("button",{onClick:p,className:"m-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Logout"})]}),(0,a.jsxs)("main",{className:"flex-1 p-6",children:[f&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:f}),s]})]}):null}}]);