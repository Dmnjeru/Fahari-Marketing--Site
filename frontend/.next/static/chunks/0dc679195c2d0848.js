(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7569,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(43476),s=e.i(71645),l=e.i(81949),a=e.i(92199),i=e.i(18566),n=e.i(30511),r=e.i(88760);let c=()=>{let e=(0,i.useRouter)(),[c,d]=(0,s.useState)([]),[o,x]=(0,s.useState)(!0),[p,h]=(0,s.useState)(null),[m,u]=(0,s.useState)(null),[j,f]=(0,s.useState)(""),b=(0,s.useCallback)(async()=>{x(!0),h(null);try{let e=await l.default.get("/api/admin/applications",{withCredentials:!0});d(e.data.data||[])}catch(a){if(l.default.isAxiosError(a)){var t,s;let l=null==(t=a.response)?void 0:t.data;if((null==(s=a.response)?void 0:s.status)===401)return void e.push("/admin/login");h((null==l?void 0:l.message)||a.message||"Failed to fetch applications.")}else a instanceof Error?h(a.message):h("Unknown error occurred while fetching applications.")}finally{x(!1)}},[e]);(0,s.useEffect)(()=>{b()},[b]);let N=c.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.jobTitle.toLowerCase().includes(j.toLowerCase()));return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Applications"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"View and manage job applications."}),(0,t.jsx)("input",{type:"text",placeholder:"Search by applicant name or job title...",value:j,onChange:e=>f(e.target.value),className:"border p-2 rounded w-64 mb-4"}),p&&(0,t.jsx)("div",{className:"text-red-600 mb-3",children:p}),o?(0,t.jsx)("div",{className:"py-6 text-center text-gray-600",children:"Loading applications..."}):0===N.length?(0,t.jsx)("div",{className:"py-6 text-center text-gray-600",children:"No applications found."}):(0,t.jsx)("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,t.jsxs)("table",{className:"w-full table-auto",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Name"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Email"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Job"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:N.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.email}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.jobTitle}),(0,t.jsx)("td",{className:"px-4 py-3 capitalize",children:e.status||"new"}),(0,t.jsx)("td",{className:"px-4 py-3 text-center",children:(0,t.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-800",title:"View application details",children:(0,t.jsx)(a.FiEye,{})})})]},e._id))})]})}),m&&(0,t.jsx)(n.default,{title:"Application â€” ".concat(m.name),onClose:()=>u(null),children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Name:"})," ",m.name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",m.email]}),m.phone&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Phone:"})," ",m.phone]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Job:"})," ",m.jobTitle]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Status:"})," ",m.status||"new"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Applied on:"})," ",new Date(m.createdAt).toLocaleString()]}),m.cvUrl&&(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:m.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View CV / Resume"})})]})})]})})}}]);