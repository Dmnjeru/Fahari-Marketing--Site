(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48686,e=>{"use strict";e.s(["default",()=>o],48686);var t=e.i(43476),l=e.i(71645),a=e.i(81949),s=e.i(18566),i=e.i(88760),n=e.i(92199),r=e.i(30511);let d=()=>{let e=(0,s.useRouter)(),[i,d]=(0,l.useState)([]),[o,c]=(0,l.useState)(!0),[u,m]=(0,l.useState)(""),[x,p]=(0,l.useState)(!1),[h,j]=(0,l.useState)(null),[f,b]=(0,l.useState)(null),[g,v]=(0,l.useState)(!1),[y,N]=(0,l.useState)({title:"",slug:"",location:"",type:"Full-time",description:"",requirements:"",deadline:""}),w=(0,l.useCallback)(async()=>{c(!0),b(null);try{let e=await a.default.get("/api/admin/jobs",{withCredentials:!0});d(e.data.data||[])}catch(s){if(a.default.isAxiosError(s)){var t,l;let a=null==(t=s.response)?void 0:t.data;if((null==(l=s.response)?void 0:l.status)===401)return void e.push("/admin/login");b((null==a?void 0:a.message)||s.message||"Failed to fetch jobs.")}else s instanceof Error?b(s.message):b("An unknown error occurred while fetching jobs.")}finally{c(!1)}},[e]);(0,l.useEffect)(()=>{w()},[w]);let C=()=>{p(!1),j(null),b(null)},S=async e=>{if(confirm("Are you sure you want to delete this job?")){b(null);try{await a.default.delete("/api/admin/jobs/".concat(e),{withCredentials:!0}),d(t=>t.filter(t=>t._id!==e))}catch(e){if(a.default.isAxiosError(e)){var t;let l=null==(t=e.response)?void 0:t.data;b((null==l?void 0:l.message)||e.message||"Delete failed")}else e instanceof Error?b(e.message):b("Unknown error during delete.")}}},E=async e=>{if(e&&e.preventDefault(),b(null),!y.title.trim()||!y.location.trim()||!y.description.trim())return void b("Please fill in Title, Location and Description.");v(!0);try{let e={title:y.title.trim(),slug:y.slug.trim()||void 0,location:y.location.trim(),type:y.type,description:y.description.trim(),deadline:y.deadline||void 0,requirements:y.requirements.split("\n").map(e=>e.trim()).filter(Boolean)};if(h){let t=await a.default.patch("/api/admin/jobs/".concat(h._id),e,{withCredentials:!0});d(e=>e.map(e=>e._id===h._id?t.data.data:e))}else{let t=await a.default.post("/api/admin/jobs",e,{withCredentials:!0});d(e=>[t.data.data,...e])}C()}catch(e){if(a.default.isAxiosError(e)){var t;let l=null==(t=e.response)?void 0:t.data;b((null==l?void 0:l.message)||e.message||"Save job failed")}else e instanceof Error?b(e.message):b("Unknown error while saving job.")}finally{v(!1)}},q=i.filter(e=>{let t=u.trim().toLowerCase();return!t||e.title.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)||(e.slug||"").toLowerCase().includes(t)});return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Jobs Management"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Create, edit or remove job postings."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search by title, location or slug...",value:u,onChange:e=>m(e.target.value),className:"border p-2 rounded w-64","aria-label":"Search jobs"}),(0,t.jsxs)("button",{onClick:()=>{j(null),N({title:"",slug:"",location:"",type:"Full-time",description:"",requirements:"",deadline:""}),b(null),p(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700","aria-label":"Create new job",children:[(0,t.jsx)(n.FiPlus,{className:"mr-2"})," New Job"]})]})]}),f&&(0,t.jsx)("div",{className:"text-red-600 mb-3",children:f}),o?(0,t.jsx)("div",{className:"py-6 text-center text-gray-600",children:"Loading jobs..."}):0===q.length?(0,t.jsx)("div",{className:"py-6 text-center text-gray-600",children:"No jobs found."}):(0,t.jsx)("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,t.jsxs)("table",{className:"w-full table-auto",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Title"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Location"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Type"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:q.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:e.title}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.location}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.type}),(0,t.jsx)("td",{className:"px-4 py-3 capitalize",children:e.status}),(0,t.jsx)("td",{className:"px-4 py-3 text-center",children:(0,t.jsxs)("div",{className:"inline-flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>(e=>{j(e),N({title:e.title,slug:e.slug||"",location:e.location,type:e.type,description:e.description,requirements:(e.requirements||[]).join("\n"),deadline:e.deadline||""}),b(null),p(!0)})(e),className:"text-blue-600 hover:text-blue-800",title:"Edit job","aria-label":"Edit ".concat(e.title),children:(0,t.jsx)(n.FiEdit,{})}),(0,t.jsx)("button",{onClick:()=>S(e._id),className:"text-red-600 hover:text-red-800",title:"Delete job","aria-label":"Delete ".concat(e.title),children:(0,t.jsx)(n.FiTrash2,{})})]})})]},e._id))})]})}),x&&(0,t.jsx)(r.default,{title:h?"Edit Job":"New Job",onClose:C,children:(0,t.jsxs)("form",{onSubmit:E,className:"space-y-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Title *",value:y.title,onChange:e=>N(t=>({...t,title:e.target.value})),className:"w-full border p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Slug (optional)",value:y.slug,onChange:e=>N(t=>({...t,slug:e.target.value})),className:"w-full border p-2 rounded"}),(0,t.jsx)("input",{type:"text",placeholder:"Location *",value:y.location,onChange:e=>N(t=>({...t,location:e.target.value})),className:"w-full border p-2 rounded",required:!0}),(0,t.jsxs)("select",{value:y.type,onChange:e=>N(t=>({...t,type:e.target.value})),className:"w-full border p-2 rounded",children:[(0,t.jsx)("option",{children:"Full-time"}),(0,t.jsx)("option",{children:"Part-time"}),(0,t.jsx)("option",{children:"Contract"}),(0,t.jsx)("option",{children:"Internship"}),(0,t.jsx)("option",{children:"Temporary"})]}),(0,t.jsx)("textarea",{placeholder:"Description *",value:y.description,onChange:e=>N(t=>({...t,description:e.target.value})),className:"w-full border p-2 rounded h-28",required:!0}),(0,t.jsx)("textarea",{placeholder:"Requirements (one per line)",value:y.requirements,onChange:e=>N(t=>({...t,requirements:e.target.value})),className:"w-full border p-2 rounded h-24"}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm text-slate-700",children:"Application Deadline (optional)"}),(0,t.jsx)("input",{type:"date",value:y.deadline,onChange:e=>N(t=>({...t,deadline:e.target.value})),className:"mt-1 w-full border p-2 rounded"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:C,className:"px-4 py-2 rounded border",disabled:g,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:g,children:g?"Saving...":h?"Update Job":"Create Job"})]})]})})]})},o=()=>{let e=(0,s.useRouter)(),[n,r]=(0,l.useState)(!0),[o,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{var t,l,s;try{if(r(!0),!(null==(t=(await a.default.get("/api/admin/me",{withCredentials:!0})).data)?void 0:t.success))return void e.push("/admin/login");c(!0)}catch(e){a.default.isAxiosError(e)?m((null==(s=e.response)||null==(l=s.data)?void 0:l.message)||"Failed to verify admin session."):e instanceof Error?m(e.message):m("Unexpected error occurred while verifying admin session.")}finally{r(!1)}})()},[e]),n)?(0,t.jsx)(i.default,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-[70vh] text-gray-500",children:"Checking admin session..."})}):u?(0,t.jsx)(i.default,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-[70vh] text-red-500",children:u})}):o?(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Manage Jobs"}),(0,t.jsx)(d,{})]})}):null}}]);