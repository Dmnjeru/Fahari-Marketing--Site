{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/lib/axiosAuth.ts"],"sourcesContent":["// frontend/src/lib/axiosAuth.ts\r\nimport axios, { AxiosError, AxiosInstance, AxiosRequestHeaders } from \"axios\";\r\n\r\nconst API_BASE = (process.env.NEXT_PUBLIC_API_URL || \"\").replace(/\\/$/, \"\"); // remove trailing slash\r\nconst ACCESS_TOKEN_KEY = \"fahari_access_token\";\r\n\r\n/* ---------------------- Token Helpers ---------------------- */\r\nfunction getAccessToken(): string | null {\r\n  try {\r\n    if (typeof window === \"undefined\") return null;\r\n    return window.localStorage.getItem(ACCESS_TOKEN_KEY);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function setAccessToken(token: string | null) {\r\n  try {\r\n    if (typeof window === \"undefined\") return;\r\n    if (token) {\r\n      window.localStorage.setItem(ACCESS_TOKEN_KEY, token);\r\n    } else {\r\n      window.localStorage.removeItem(ACCESS_TOKEN_KEY);\r\n    }\r\n  } catch {\r\n    // ignore storage errors\r\n  }\r\n}\r\n\r\nexport function clearAccessToken() {\r\n  setAccessToken(null);\r\n}\r\n\r\n/* ---------------------- Axios Instance ---------------------- */\r\nconst axiosAuth: AxiosInstance = axios.create({\r\n  baseURL: API_BASE || undefined,\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n/* ---------------------- Request Interceptor ---------------------- */\r\naxiosAuth.interceptors.request.use((config) => {\r\n  const token = getAccessToken();\r\n  if (token) {\r\n    config.headers = (config.headers ?? {}) as AxiosRequestHeaders;\r\n    config.headers[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n/* ---------------------- Response Interceptor ---------------------- */\r\naxiosAuth.interceptors.response.use(\r\n  (resp) => resp,\r\n  async (err: AxiosError) => {\r\n    const originalRequest = err.config as (typeof err.config & { _retry?: boolean }) | undefined;\r\n    if (!originalRequest) return Promise.reject(err);\r\n\r\n    if (err.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n\r\n      try {\r\n        // Call backend refresh endpoint\r\n        const refreshRes = await axios.post(\r\n          `${API_BASE}/api/admin/refresh`,\r\n          {},\r\n          { withCredentials: true }\r\n        );\r\n\r\n        const newToken = refreshRes?.data?.token as string | undefined;\r\n\r\n        if (newToken) {\r\n          setAccessToken(newToken);\r\n\r\n          // Attach new token and retry request\r\n          originalRequest.headers = (originalRequest.headers ?? {}) as AxiosRequestHeaders;\r\n          originalRequest.headers[\"Authorization\"] = `Bearer ${newToken}`;\r\n\r\n          return axiosAuth.request(originalRequest);\r\n        } else {\r\n          clearAccessToken();\r\n          if (typeof window !== \"undefined\") {\r\n            window.location.href = \"/admin/login\";\r\n          }\r\n          return Promise.reject(err);\r\n        }\r\n      } catch (refreshError) {\r\n        clearAccessToken();\r\n        if (typeof window !== \"undefined\") {\r\n          window.location.href = \"/admin/login\";\r\n        }\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default axiosAuth;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;;AAGd;AAFlB;;AAEA,MAAM,WAAW,CAAC,6DAAmC,EAAE,EAAE,OAAO,CAAC,OAAO,KAAK,wBAAwB;AACrG,MAAM,mBAAmB;AAEzB,+DAA+D,GAC/D,SAAS;IACP,IAAI;QACF;;QACA,OAAO,OAAO,YAAY,CAAC,OAAO,CAAC;IACrC,EAAE,UAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,eAAe,KAAoB;IACjD,IAAI;QACF;;QACA,IAAI,OAAO;YACT,OAAO,YAAY,CAAC,OAAO,CAAC,kBAAkB;QAChD,OAAO;YACL,OAAO,YAAY,CAAC,UAAU,CAAC;QACjC;IACF,EAAE,UAAM;IACN,wBAAwB;IAC1B;AACF;AAEO,SAAS;IACd,eAAe;AACjB;AAEA,gEAAgE,GAChE,MAAM,YAA2B,mJAAK,CAAC,MAAM,CAAC;IAC5C,SAAS,YAAY;IACrB,iBAAiB;IACjB,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,qEAAqE,GACrE,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAClC,MAAM,QAAQ;IACd,IAAI,OAAO;YACS;QAAlB,OAAO,OAAO,GAAI,CAAA,kBAAA,OAAO,OAAO,cAAd,6BAAA,kBAAkB,CAAC;QACrC,OAAO,OAAO,CAAC,gBAAgB,GAAG,AAAC,UAAe,OAAN;IAC9C;IACA,OAAO;AACT;AAEA,sEAAsE,GACtE,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,OAAS,MACV,OAAO;QAID;IAHJ,MAAM,kBAAkB,IAAI,MAAM;IAClC,IAAI,CAAC,iBAAiB,OAAO,QAAQ,MAAM,CAAC;IAE5C,IAAI,EAAA,gBAAA,IAAI,QAAQ,cAAZ,oCAAA,cAAc,MAAM,MAAK,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC3D,gBAAgB,MAAM,GAAG;QAEzB,IAAI;gBAQe;YAPjB,gCAAgC;YAChC,MAAM,aAAa,MAAM,mJAAK,CAAC,IAAI,CACjC,AAAC,GAAW,OAAT,UAAS,uBACZ,CAAC,GACD;gBAAE,iBAAiB;YAAK;YAG1B,MAAM,WAAW,uBAAA,kCAAA,mBAAA,WAAY,IAAI,cAAhB,uCAAA,iBAAkB,KAAK;YAExC,IAAI,UAAU;gBACZ,eAAe;oBAGY;gBAD3B,qCAAqC;gBACrC,gBAAgB,OAAO,GAAI,CAAA,2BAAA,gBAAgB,OAAO,cAAvB,sCAAA,2BAA2B,CAAC;gBACvD,gBAAgB,OAAO,CAAC,gBAAgB,GAAG,AAAC,UAAkB,OAAT;gBAErD,OAAO,UAAU,OAAO,CAAC;YAC3B,OAAO;gBACL;gBACA,wCAAmC;oBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB;gBACA,OAAO,QAAQ,MAAM,CAAC;YACxB;QACF,EAAE,OAAO,cAAc;YACrB;YACA,wCAAmC;gBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;YACA,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\n/**\r\n * Utility to merge Tailwind + conditional classes.\r\n * Example: cn(\"p-2\", isActive && \"bg-blue-500\")\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-red-500 text-white hover:bg-red-600\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"underline-offset-4 hover:underline text-primary\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 px-3 rounded-md\",\r\n        lg: \"h-11 px-8 rounded-md\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,wQACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,QAA0D;QAAzD,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO;IACtD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAGF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Card container — provides padding, rounded corners, and shadow.\r\n */\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\n/**\r\n * CardContent — section inside Card for content layout.\r\n */\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-4 md:p-6\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\n/**\r\n * CardHeader — optional header for titles, actions, etc.\r\n */\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-between p-4 md:p-6 border-b\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\n/**\r\n * CardFooter — optional footer for buttons, metadata, etc.\r\n */\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-end p-4 md:p-6 border-t\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardContent, CardHeader, CardFooter };\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;;AAEA;;CAEC,GACD,MAAM,qBAAO,2KAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,oFACA;QAED,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB;;CAEC,GACD,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,cAAc;QAAa,GAAG,KAAK;;;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B;;CAEC,GACD,MAAM,2BAAa,2KAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB;;CAEC,GACD,MAAM,2BAAa,2KAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>;\r\n\r\n/**\r\n * Reusable input component with consistent styling and improved text contrast.\r\n */\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type = \"text\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          // Base styles\r\n          \"flex h-11 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white\",\r\n          // Placeholder + focus\r\n          \"placeholder:text-gray-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\",\r\n          // Disabled state\r\n          \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA;;CAEC,GACD,MAAM,sBAAQ,2KAAgB,MAC5B,QAAyC;QAAxC,EAAE,SAAS,EAAE,OAAO,MAAM,EAAE,GAAG,OAAO;IACrC,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,cAAc;QACd,iHACA,sBAAsB;QACtB,qIACA,iBAAiB;QACjB,mDACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto rounded-lg border border-gray-200\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\nTable.displayName = \"Table\";\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b bg-gray-50\", className)} {...props} />\r\n));\r\nTableHeader.displayName = \"TableHeader\";\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0 divide-y divide-gray-200\", className)}\r\n    {...props}\r\n  />\r\n));\r\nTableBody.displayName = \"TableBody\";\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"hover:bg-gray-50 transition-colors data-[state=selected]:bg-gray-100\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTableRow.displayName = \"TableRow\";\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-gray-700\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTableHead.displayName = \"TableHead\";\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle text-gray-900\", className)}\r\n    {...props}\r\n  />\r\n));\r\nTableCell.displayName = \"TableCell\";\r\n\r\nexport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;;;AAEpF,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,uDAAuD;QACpE,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,yBAAW,2KAAgB,OAG/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,kCAAkC;QAC/C,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/njeru/fahari-marketing-site/frontend/src/app/admin/applications/page.tsx"],"sourcesContent":["// frontend/src/app/admin/applications/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport axiosAuth from \"../../../lib/axiosAuth\"; // ✅ use auth-aware axios\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Card, CardContent } from \"../../../components/ui/card\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n  TableCell,\r\n} from \"../../../components/ui/table\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Trash2 } from \"lucide-react\";\r\nimport axios from \"axios\"; // keep only for isAxiosError type checking\r\n\r\nexport interface Application {\r\n  _id: string;\r\n  jobTitle: string;\r\n  applicantName: string;\r\n  applicantEmail: string;\r\n  status: \"pending\" | \"reviewed\" | \"rejected\" | \"accepted\";\r\n  submittedAt: string;\r\n}\r\n\r\nexport default function ApplicationsPage() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const queryClient = useQueryClient();\r\n\r\n  // Fetch applications\r\n  const {\r\n    data: applications = [],\r\n    isLoading,\r\n    isError,\r\n    error,\r\n  } = useQuery<Application[]>({\r\n    queryKey: [\"admin-applications\", search],\r\n    queryFn: async () => {\r\n      const res = await axiosAuth.get<{ data: Application[] }>(\r\n        `/api/careers/applications?q=${encodeURIComponent(search)}`\r\n      );\r\n      return res.data?.data ?? [];\r\n    },\r\n  });\r\n\r\n  // Delete application mutation\r\n  const deleteMutation = useMutation<void, unknown, string>({\r\n    mutationFn: async (id: string) => {\r\n      await axiosAuth.delete(`/api/careers/applications/${encodeURIComponent(id)}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-applications\"] });\r\n    },\r\n  });\r\n\r\n  return (\r\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"p-6 space-y-6\">\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Applications</h1>\r\n        <Input\r\n          placeholder=\"Search by applicant or job...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"max-w-sm\"\r\n        />\r\n      </div>\r\n\r\n      {/* MAIN CARD */}\r\n      <Card className=\"shadow-md\">\r\n        <CardContent className=\"p-4 space-y-4\">\r\n          {/* LOADING */}\r\n          {isLoading && <p className=\"text-gray-500\">Loading applications...</p>}\r\n\r\n          {/* ERROR */}\r\n          {isError && (\r\n            <div className=\"text-red-600\">\r\n              <p>Failed to load applications.</p>\r\n              <p className=\"text-sm\">\r\n                {axios.isAxiosError(error)\r\n                  ? error.response?.data?.message || error.message\r\n                  : (error as Error).message}\r\n              </p>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"mt-2\"\r\n                onClick={() => queryClient.invalidateQueries({ queryKey: [\"admin-applications\"] })}\r\n              >\r\n                Retry\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* NO RESULTS */}\r\n          {!isLoading && !isError && applications.length === 0 && (\r\n            <p className=\"text-gray-500\">No applications found.</p>\r\n          )}\r\n\r\n          {/* APPLICATION LIST */}\r\n          {!isLoading && applications.length > 0 && (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Applicant Name</TableHead>\r\n                    <TableHead>Email</TableHead>\r\n                    <TableHead>Job Title</TableHead>\r\n                    <TableHead>Status</TableHead>\r\n                    <TableHead>Submitted At</TableHead>\r\n                    <TableHead>Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n\r\n                <TableBody>\r\n                  {applications.map((app) => (\r\n                    <TableRow key={app._id} className=\"hover:bg-gray-50\">\r\n                      <TableCell>{app.applicantName}</TableCell>\r\n                      <TableCell>{app.applicantEmail}</TableCell>\r\n                      <TableCell>{app.jobTitle}</TableCell>\r\n                      <TableCell className=\"capitalize\">{app.status}</TableCell>\r\n                      <TableCell>{new Date(app.submittedAt).toLocaleDateString()}</TableCell>\r\n                      <TableCell>\r\n                        <Button\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          disabled={deleteMutation.isPending}\r\n                          onClick={() => {\r\n                            if (confirm(\"Are you sure you want to delete this application?\")) {\r\n                              deleteMutation.mutate(app._id);\r\n                            }\r\n                          }}\r\n                        >\r\n                          {deleteMutation.isPending ? \"Deleting...\" : <Trash2 size={16} />}\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}